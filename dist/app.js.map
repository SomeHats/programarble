{"version":3,"sources":["webpack:///app.js","webpack:///./src/engine/Component.js","webpack:///./src/constants.js","webpack:///./src/engine/Marble.js","webpack:///./src/engine/machines/parts/Input.js","webpack:///./src/engine/machines/parts/Output.js","webpack:///./src/lib/utils.js","webpack:///./src/actions/game.js","webpack:///./src/actions/types.js","webpack:///./src/components/graphics/index.js","webpack:///./~/lodash/_Symbol.js","webpack:///./src/components/App.js","webpack:///./src/components/Button.js","webpack:///./src/components/controls/Controls.js","webpack:///./src/components/graphics/Graphics.js","webpack:///./src/components/graphics/lib/createGraphicsComponent.js","webpack:///./src/components/machines/Source.js","webpack:///./src/components/render/Machine.js","webpack:///./src/components/render/Machines.js","webpack:///./src/components/render/Marble.js","webpack:///./src/components/render/Marbles.js","webpack:///./src/components/render/MatterDebug.js","webpack:///./src/components/render/Renderer.js","webpack:///./src/engine/machines/Clone.js","webpack:///./src/engine/machines/Combine.js","webpack:///./src/engine/machines/Destination.js","webpack:///./src/engine/machines/Filter.js","webpack:///./src/engine/machines/Source.js","webpack:///./src/engine/sequences/Count.js","webpack:///./src/engine/setupEvents.js","webpack:///./src/engine/start.js","webpack:///./src/engine/syncStore.js","webpack:///./src/index.js","webpack:///./src/reducers/game.js","webpack:///./src/store.js","webpack:///./styles/index.scss","webpack:///./~/lodash/_arrayPush.js","webpack:///./~/lodash/_baseFlatten.js","webpack:///./~/lodash/_baseToString.js","webpack:///./~/lodash/_isFlattenable.js","webpack:///./~/lodash/flatten.js","webpack:///./~/lodash/toString.js","webpack:///./~/lodash/uniqueId.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","39","Object","defineProperty","value","_utils","noop","val","Component","registered","create","name","spec","id","Symbol","component","assign","componentId","instances","initialState","_afterAdd","afterAdd","_beforeRemove","beforeRemove","props","state","instance","getState","push","apply","this","arguments","remove","get","Error","toString","74","_defineProperty","obj","key","enumerable","configurable","writable","_extends","target","i","length","source","prototype","hasOwnProperty","call","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","iterator","next","done","err","Array","isArray","TypeError","GEOM_SCALE","palette","MARBLE_RADIUS","WALL_SIZE","PAD","turquoise","green","blue","purple","black","yellow","orange","red","white","grey","darkTurquoise","darkGreen","darkBlue","darkPurple","darkBlack","darkYellow","darkOrange","darkRed","darkWhite","darkGrey","str","entries","reduce","colours","_ref","_ref2","colour","75","_interopRequireDefault","__esModule","default","_matterJs","_constants","_Component","_Component2","Marble","x","y","Bodies","circle","force","Common","random","friction","getValue","body","setValue","afterUpdate","_ref3","bounds","world","Bounds","overlaps","World","99","InputSensor","width","height","rectangle","isSensor","collisions","start","marble","Input","parent","waiting","end","_ref2$rate","rate","isStatic","Body","parts","render","fillStyle","game","lastConsumed","engine","timing","timestamp","canConsume","_Input$getState","consume","_state$game","consumed","shift","100","_Marble","_Marble2","OutputSensor","Output","blockers","lastProduced","canProduce","_Output$getState","produce","add","position","131","idx","indexOf","splice","degrees","n","Math","PI","204","_interopRequireWildcard","newObj","addMachine","_uniqueId","_uniqueId2","_types","types","machineType","type","MACHINES","ADD","205","206","RoundedRectangle","Rectangle","Polygon","Ellipse","Circle","BezierCurve","Arc","Graphics","_Graphics","_createGraphicsComponent","_createGraphicsComponent2","graphics","cx","cy","radius","startAngle","endAngle","antiClockwise","x1","y1","x2","y2","arc","arcTo","cpX","cpY","cpX2","cpY2","toX","toY","BezierCurveTo","drawCircle","_ref4","drawEllipse","_ref5","path","drawPolygon","_ref6","drawRectangle","_ref7","drawRoundedRect","238","root","331","_classCallCheck","Constructor","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","constructor","setPrototypeOf","__proto__","_createClass","defineProperties","descriptor","protoProps","staticProps","_react","_react2","_Controls","_Controls2","_Renderer","_Renderer2","_MatterDebug","_MatterDebug2","App","_React$Component","_temp","_this","_ret","_len","args","_key","getPrototypeOf","concat","updateSize","window","innerWidth","innerHeight","controlsWidth","max","round","gameWidth","setState","setSize","addEventListener","removeEventListener","_props","debug","_state","createElement","className","propTypes","PropTypes","object","isRequired","bool","childContextTypes","332","_objectWithoutProperties","keys","Button","_ref$className","string","333","Controls","onSourceAdd","style","_Button2","onClick","_reactRedux","_game","_Button","number","func","mapDispatchToProps","connect","334","_pixi","_pixi2","_reactPixi","RawGraphics","CustomPIXIComponent","customDisplayObject","cacheAsBitmap","customApplyProps","oldProps","clear","draw","drawCount","Children","toArray","children","forEach","child","node","335","wrapDraw","lineWidth","lineColor","lineAlpha","hasFill","fill","beginFill","alpha","endFill","displayName","336","Source","DisplayObjectContainer","g","box","arrow","_graphics","bottom","top","flareRadius","flareTopRadius","flareTop","contextTypes","337","_Source","338","Machine","machine","machines","toObject","Text","text","_reactImmutableProptypes","_reactImmutableProptypes2","_machines","map","mapStateToProps","machineId","339","Machines","_Machine2","_Machine","set","340","angle","rotation","textStyle","anchor","center","fontFamily","fontSize","fontWeight","font","Point","any","341","_Marble3","_Marble4","Marbles","loop","frameRequestId","requestAnimationFrame","forceUpdate","cancelAnimationFrame","marbles","context","_marble$position","342","MatterDebug","attachRenderer","element","_this$props","renderer","Render","options","wireframeBackground","run","stop","ref","343","Renderer","Stage","backgroundcolor","antialias","_Marbles2","_Machines2","_Machines","_Marbles","344","_Output","_Output2","_Input","_Input2","Clone","input","rightOutput","leftOutput","Composite","bodies","beforeUpdate","345","Combine","combine","rightInput","leftInput","output","left","right","346","Destination","_","347","Filter","condition","348","_Count","_Count2","_ref$sequence","sequence","349","_Clone","_Combine","_Destination","_Filter","350","Count","_ref$min","min","_ref$max","Infinity","_ref$step","step","nextValue","351","_typeof","_flatten","_flatten2","hasProp","logEventSetup","event","components","console","group","log","groupEnd","eventNames","values","setupWorldEvent","eventName","relevantComponents","filter","fireForBody","allBodies","Events","on","setupEngineEvent","fireCollision","phase","typeA","bodyA","typeB","bodyB","componentA","componentB","componentState","setupCollisionEvents","pairs","pair","352","_setupEvents","_setupEvents2","_syncStore","_syncStore2","store","Engine","353","_immutable","_immutable2","instancesById","lastMachinesInScene","Set","machinesById","machinesInScene","equals","added","subtract","machineClass","removed","354","_reactDom","_App","_App2","_store","_store2","_start","_start2","Provider","document","getElementById","dispatch","355","Map","reducers","setIn","update","action","356","_redux","_reduxThunk","_reduxThunk2","_game2","reducer","gameState","createStore","compose","applyMiddleware","devToolsExtension","f","552","p","558","arrayPush","array","index","offset","559","baseFlatten","depth","predicate","isStrict","result","isFlattenable","565","baseToString","isSymbol","symbolToString","INFINITY","symbolProto","571","isArguments","spreadableSymbol","isConcatSpreadable","582","flatten","589","590","uniqueId","prefix","idCounter"],"mappings":"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","file":"app.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(354);\n\tmodule.exports = __webpack_require__(552);\n\n\n/***/ },\n\n/***/ 39:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _utils = __webpack_require__(131);\n\t\n\tvar noop = function noop(val) {\n\t  return function () {\n\t    return val;\n\t  };\n\t};\n\tvar Component = {\n\t  registered: {},\n\t\n\t  create: function create(name, spec) {\n\t    var id = Symbol('Component(' + name + ')');\n\t\n\t    var component = Object.assign({}, spec, {\n\t      name: name,\n\t      componentId: id,\n\t      instances: [],\n\t      initialState: spec.initialState || function () {\n\t        return {};\n\t      },\n\t      _afterAdd: spec.afterAdd || noop(),\n\t      _beforeRemove: spec.beforeRemove || noop(),\n\t\n\t      create: function create(props) {\n\t        var state = component.initialState(props);\n\t        var instance = spec.create(props, state);\n\t        instance.id = spec.id || instance.id;\n\t        instance[id] = state;\n\t        return instance;\n\t      },\n\t      getState: function getState(instance) {\n\t        return instance[id];\n\t      },\n\t      afterAdd: function afterAdd(instance) {\n\t        component.instances.push(instance);\n\t        component._afterAdd.apply(this, arguments);\n\t      },\n\t      beforeRemove: function beforeRemove(instance) {\n\t        (0, _utils.remove)(component.instances, instance);\n\t        component._beforeRemove.apply(this, arguments);\n\t      }\n\t    });\n\t\n\t    Component.registered[id] = Component.registered[name] = component;\n\t    return component;\n\t  },\n\t  get: function get(name) {\n\t    if (!Component.registered[name]) throw new Error('Component ' + name.toString() + ' not found');\n\t    return Component.registered[name];\n\t  }\n\t};\n\t\n\texports.default = Component;\n\n/***/ },\n\n/***/ 74:\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tvar GEOM_SCALE = exports.GEOM_SCALE = 1;\n\tvar MARBLE_RADIUS = exports.MARBLE_RADIUS = 15 * GEOM_SCALE;\n\tvar WALL_SIZE = exports.WALL_SIZE = 5 * GEOM_SCALE;\n\tvar PAD = exports.PAD = 1 * GEOM_SCALE;\n\t\n\tvar palette = exports.palette = {\n\t  turquoise: 0x1abc9c,\n\t  green: 0x2ecc71,\n\t  blue: 0x3498db,\n\t  purple: 0x9b59b6,\n\t  black: 0x34495e,\n\t  yellow: 0xf1c40f,\n\t  orange: 0xe67e22,\n\t  red: 0xe74c3c,\n\t  white: 0xecf0f1,\n\t  grey: 0x95a5a6,\n\t  darkTurquoise: 0x16a085,\n\t  darkGreen: 0x27ae60,\n\t  darkBlue: 0x2980b9,\n\t  darkPurple: 0x8e44ad,\n\t  darkBlack: 0x2c3e50,\n\t  darkYellow: 0xf39c12,\n\t  darkOrange: 0xd35400,\n\t  darkRed: 0xc0392b,\n\t  darkWhite: 0xbdc3c7,\n\t  darkGrey: 0x7f8c8d\n\t};\n\t\n\tpalette.str = Object.entries(palette).reduce(function (colours, _ref) {\n\t  var _ref2 = _slicedToArray(_ref, 2);\n\t\n\t  var name = _ref2[0];\n\t  var colour = _ref2[1];\n\t  return _extends({}, colours, _defineProperty({}, name, \"#\" + colour.toString(16)));\n\t}, {});\n\n/***/ },\n\n/***/ 75:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _matterJs = __webpack_require__(35);\n\t\n\tvar _constants = __webpack_require__(74);\n\t\n\tvar _Component = __webpack_require__(39);\n\t\n\tvar _Component2 = _interopRequireDefault(_Component);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Marble = _Component2.default.create('Marble', {\n\t  initialState: function initialState(_ref) {\n\t    var value = _ref.value;\n\t\n\t    return {\n\t      value: value\n\t    };\n\t  },\n\t  create: function create(_ref2) {\n\t    var x = _ref2.x;\n\t    var y = _ref2.y;\n\t\n\t    return _matterJs.Bodies.circle(x, y, _constants.MARBLE_RADIUS, {\n\t      force: {\n\t        x: _matterJs.Common.random(-0.001, 0.001),\n\t        y: _matterJs.Common.random(-0.001, 0.001)\n\t      },\n\t      friction: 0.1\n\t    });\n\t  },\n\t  getValue: function getValue(body) {\n\t    return Marble.getState(body).value;\n\t  },\n\t  setValue: function setValue(body, value) {\n\t    Marble.getState(body).value = value;\n\t    return value;\n\t  },\n\t  afterUpdate: function afterUpdate(body, state, _ref3) {\n\t    var bounds = _ref3.bounds;\n\t    var world = _ref3.world;\n\t\n\t    if (!_matterJs.Bounds.overlaps(bounds, body.bounds)) {\n\t      _matterJs.World.remove(world, body);\n\t    }\n\t  }\n\t});\n\t\n\texports.default = Marble;\n\n/***/ },\n\n/***/ 99:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _matterJs = __webpack_require__(35);\n\t\n\tvar _Component = __webpack_require__(39);\n\t\n\tvar _Component2 = _interopRequireDefault(_Component);\n\t\n\tvar _constants = __webpack_require__(74);\n\t\n\tvar _utils = __webpack_require__(131);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar InputSensor = _Component2.default.create('Input.Sensor', {\n\t  width: 2 * (_constants.MARBLE_RADIUS + _constants.PAD),\n\t  height: _constants.WALL_SIZE,\n\t\n\t  create: function create(_ref) {\n\t    var x = _ref.x;\n\t    var y = _ref.y;\n\t\n\t    return _matterJs.Bodies.rectangle(x, y + _constants.MARBLE_RADIUS, InputSensor.width, InputSensor.height, {\n\t      isSensor: true\n\t    });\n\t  },\n\t\n\t\n\t  collisions: {\n\t    Marble: {\n\t      start: function start(body, state, marble) {\n\t        Input.getState(body.parent).waiting.push(marble);\n\t      },\n\t      end: function end(body, state, marble) {\n\t        (0, _utils.remove)(Input.getState(body.parent).waiting, marble);\n\t      }\n\t    }\n\t  }\n\t});\n\t\n\tvar Input = _Component2.default.create('Input', {\n\t  width: 2 * (_constants.MARBLE_RADIUS + _constants.WALL_SIZE + _constants.PAD),\n\t  height: 2 * (_constants.WALL_SIZE + _constants.MARBLE_RADIUS),\n\t  initialState: function initialState(_ref2) {\n\t    var _ref2$rate = _ref2.rate;\n\t    var rate = _ref2$rate === undefined ? 100 : _ref2$rate;\n\t\n\t    return {\n\t      rate: rate,\n\t      waiting: []\n\t    };\n\t  },\n\t  create: function create(_ref3) {\n\t    var x = _ref3.x;\n\t    var y = _ref3.y;\n\t    var isStatic = _ref3.isStatic;\n\t\n\t    return _matterJs.Body.create({\n\t      isStatic: isStatic,\n\t      parts: [_matterJs.Bodies.rectangle(x + _constants.MARBLE_RADIUS + _constants.WALL_SIZE / 2 + _constants.PAD, y, _constants.WALL_SIZE, Input.height - _constants.WALL_SIZE), _matterJs.Bodies.rectangle(x - (_constants.MARBLE_RADIUS + _constants.WALL_SIZE / 2 + _constants.PAD), y, _constants.WALL_SIZE, Input.height - _constants.WALL_SIZE, { render: { fillStyle: 'red' } }), _matterJs.Bodies.rectangle(x, y + _constants.MARBLE_RADIUS + _constants.WALL_SIZE, Input.width, _constants.WALL_SIZE), InputSensor.create({ x: x, y: y })]\n\t    });\n\t  },\n\t  afterAdd: function afterAdd(body, state, game) {\n\t    state.game = game;\n\t    state.lastConsumed = game.engine.timing.timestamp;\n\t  },\n\t  canConsume: function canConsume(body) {\n\t    var _Input$getState = Input.getState(body);\n\t\n\t    var lastConsumed = _Input$getState.lastConsumed;\n\t    var rate = _Input$getState.rate;\n\t    var waiting = _Input$getState.waiting;\n\t    var game = _Input$getState.game;\n\t    var timestamp = game.engine.timing.timestamp;\n\t\n\t\n\t    return timestamp - lastConsumed > rate && waiting.length;\n\t  },\n\t  consume: function consume(body) {\n\t    var state = Input.getState(body);\n\t    var _state$game = state.game;\n\t    var world = _state$game.world;\n\t    var engine = _state$game.engine;\n\t\n\t    var consumed = state.waiting.shift();\n\t\n\t    _matterJs.World.remove(world, consumed);\n\t    state.lastConsumed = engine.timing.timestamp;\n\t\n\t    return consumed;\n\t  }\n\t});\n\t\n\texports.default = Input;\n\n/***/ },\n\n/***/ 100:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _matterJs = __webpack_require__(35);\n\t\n\tvar _Component = __webpack_require__(39);\n\t\n\tvar _Component2 = _interopRequireDefault(_Component);\n\t\n\tvar _Marble = __webpack_require__(75);\n\t\n\tvar _Marble2 = _interopRequireDefault(_Marble);\n\t\n\tvar _constants = __webpack_require__(74);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar OutputSensor = _Component2.default.create('Output.Sensor', {\n\t  width: 2 * (_constants.MARBLE_RADIUS + _constants.PAD),\n\t  height: 2 * _constants.MARBLE_RADIUS,\n\t\n\t  create: function create(_ref) {\n\t    var x = _ref.x;\n\t    var y = _ref.y;\n\t\n\t    return _matterJs.Bodies.rectangle(x, y, OutputSensor.width, OutputSensor.height, {\n\t      isSensor: true\n\t    });\n\t  },\n\t\n\t\n\t  collisions: {\n\t    Marble: {\n\t      start: function start(body) {\n\t        Output.getState(body.parent).blockers += 1;\n\t      },\n\t      end: function end(body) {\n\t        Output.getState(body.parent).blockers -= 1;\n\t      }\n\t    }\n\t  }\n\t});\n\t\n\tvar Output = _Component2.default.create('Output', {\n\t  width: 2 * (_constants.MARBLE_RADIUS + _constants.WALL_SIZE + _constants.PAD),\n\t  height: _constants.WALL_SIZE + _constants.MARBLE_RADIUS * 2,\n\t\n\t  initialState: function initialState(_ref2) {\n\t    var _ref2$rate = _ref2.rate;\n\t    var rate = _ref2$rate === undefined ? 100 : _ref2$rate;\n\t\n\t    return {\n\t      rate: rate,\n\t      blockers: 0\n\t    };\n\t  },\n\t  create: function create(_ref3) {\n\t    var x = _ref3.x;\n\t    var y = _ref3.y;\n\t    var isStatic = _ref3.isStatic;\n\t\n\t    return _matterJs.Body.create({\n\t      isStatic: isStatic,\n\t      parts: [_matterJs.Bodies.rectangle(x + _constants.MARBLE_RADIUS + _constants.WALL_SIZE / 2 + _constants.PAD, y, _constants.WALL_SIZE, _constants.MARBLE_RADIUS * 2), _matterJs.Bodies.rectangle(x - (_constants.MARBLE_RADIUS + _constants.WALL_SIZE / 2 + _constants.PAD), y, _constants.WALL_SIZE, _constants.MARBLE_RADIUS * 2), _matterJs.Bodies.rectangle(x, y - (_constants.MARBLE_RADIUS + _constants.WALL_SIZE / 2), Output.width, _constants.WALL_SIZE), OutputSensor.create({ x: x, y: y })]\n\t    });\n\t  },\n\t  afterAdd: function afterAdd(body, state, game) {\n\t    state.game = game;\n\t    state.lastProduced = game.engine.timing.timestamp;\n\t  },\n\t  canProduce: function canProduce(body) {\n\t    var _Output$getState = Output.getState(body);\n\t\n\t    var lastProduced = _Output$getState.lastProduced;\n\t    var rate = _Output$getState.rate;\n\t    var blockers = _Output$getState.blockers;\n\t    var game = _Output$getState.game;\n\t    var timestamp = game.engine.timing.timestamp;\n\t\n\t\n\t    return timestamp - lastProduced > rate && !blockers;\n\t  },\n\t  produce: function produce(body, value) {\n\t    var state = Output.getState(body);\n\t    var _state$game = state.game;\n\t    var world = _state$game.world;\n\t    var engine = _state$game.engine;\n\t\n\t\n\t    _matterJs.World.add(world, _Marble2.default.create({\n\t      x: body.position.x,\n\t      y: body.position.y,\n\t      value: value\n\t    }));\n\t\n\t    state.lastProduced = engine.timing.timestamp;\n\t  }\n\t});\n\t\n\texports.default = Output;\n\n/***/ },\n\n/***/ 131:\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar hasOwnProperty = exports.hasOwnProperty = function hasOwnProperty(obj, key) {\n\t  return Object.prototype.hasOwnProperty.call(obj, key);\n\t};\n\t\n\tvar remove = exports.remove = function remove(arr, value) {\n\t  var idx = arr.indexOf(value);\n\t  if (idx === -1) return undefined;\n\t  return arr.splice(idx, 1)[0];\n\t};\n\t\n\tvar degrees = exports.degrees = function degrees(n) {\n\t  return n * (Math.PI / 180);\n\t};\n\n/***/ },\n\n/***/ 204:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.addMachine = undefined;\n\t\n\tvar _uniqueId = __webpack_require__(590);\n\t\n\tvar _uniqueId2 = _interopRequireDefault(_uniqueId);\n\t\n\tvar _types = __webpack_require__(205);\n\t\n\tvar types = _interopRequireWildcard(_types);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/* eslint-disable import/prefer-default-export */\n\t\n\tvar addMachine = exports.addMachine = function addMachine(machineType, x, y) {\n\t  return {\n\t    type: types.MACHINES.ADD,\n\t    machineType: machineType,\n\t    id: (0, _uniqueId2.default)(machineType),\n\t    x: x,\n\t    y: y\n\t  };\n\t};\n\n/***/ },\n\n/***/ 205:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/* eslint-disable import/prefer-default-export */\n\tvar MACHINES = exports.MACHINES = {\n\t  ADD: 'MACHINES:ADD'\n\t};\n\n/***/ },\n\n/***/ 206:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.RoundedRectangle = exports.Rectangle = exports.Polygon = exports.Ellipse = exports.Circle = exports.BezierCurve = exports.Arc = exports.Graphics = undefined;\n\t\n\tvar _Graphics = __webpack_require__(334);\n\t\n\tObject.defineProperty(exports, 'Graphics', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_Graphics).default;\n\t  }\n\t});\n\t\n\tvar _createGraphicsComponent = __webpack_require__(335);\n\t\n\tvar _createGraphicsComponent2 = _interopRequireDefault(_createGraphicsComponent);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Arc = exports.Arc = (0, _createGraphicsComponent2.default)('Arc', function (graphics, _ref) {\n\t  var cx = _ref.cx;\n\t  var cy = _ref.cy;\n\t  var radius = _ref.radius;\n\t  var startAngle = _ref.startAngle;\n\t  var endAngle = _ref.endAngle;\n\t  var antiClockwise = _ref.antiClockwise;\n\t  var x1 = _ref.x1;\n\t  var y1 = _ref.y1;\n\t  var x2 = _ref.x2;\n\t  var y2 = _ref.y2;\n\t\n\t  if (cx != null && cy != null && radius != null && startAngle != null && endAngle != null) {\n\t    graphics.arc(cx, cy, radius, startAngle, endAngle, antiClockwise);\n\t  } else if (x1 != null && x2 != null && y1 != null && y2 != null && radius != null) {\n\t    graphics.arcTo(x1, y1, x2, y2, radius);\n\t  } else {\n\t    throw new Error('Arc must be given props matching either Pixi Graphics arc or arcTo');\n\t  }\n\t});\n\t\n\tvar BezierCurve = exports.BezierCurve = (0, _createGraphicsComponent2.default)('BezierCurve', function (graphics, _ref2) {\n\t  var cpX = _ref2.cpX;\n\t  var cpY = _ref2.cpY;\n\t  var cpX2 = _ref2.cpX2;\n\t  var cpY2 = _ref2.cpY2;\n\t  var toX = _ref2.toX;\n\t  var toY = _ref2.toY;\n\t  return graphics.BezierCurveTo(cpX, cpY, cpX2, cpY2, toX, toY);\n\t});\n\t\n\tvar Circle = exports.Circle = (0, _createGraphicsComponent2.default)('Circle', function (graphics, _ref3) {\n\t  var x = _ref3.x;\n\t  var y = _ref3.y;\n\t  var radius = _ref3.radius;\n\t  return graphics.drawCircle(x, y, radius);\n\t});\n\t\n\tvar Ellipse = exports.Ellipse = (0, _createGraphicsComponent2.default)('Ellipse', function (graphics, _ref4) {\n\t  var x = _ref4.x;\n\t  var y = _ref4.y;\n\t  var width = _ref4.width;\n\t  var height = _ref4.height;\n\t  return graphics.drawEllipse(x, y, width, height);\n\t});\n\t\n\tvar Polygon = exports.Polygon = (0, _createGraphicsComponent2.default)('Polygon', function (graphics, _ref5) {\n\t  var path = _ref5.path;\n\t  return graphics.drawPolygon(path);\n\t});\n\t\n\tvar Rectangle = exports.Rectangle = (0, _createGraphicsComponent2.default)('Rectangle', function (graphics, _ref6) {\n\t  var x = _ref6.x;\n\t  var y = _ref6.y;\n\t  var width = _ref6.width;\n\t  var height = _ref6.height;\n\t  return graphics.drawRectangle(x, y, width, height);\n\t});\n\t\n\tvar RoundedRectangle = exports.RoundedRectangle = (0, _createGraphicsComponent2.default)('RoundedRectangle', function (graphics, _ref7) {\n\t  var x = _ref7.x;\n\t  var y = _ref7.y;\n\t  var width = _ref7.width;\n\t  var height = _ref7.height;\n\t  var radius = _ref7.radius;\n\t  return graphics.drawRoundedRect(x, y, width, height, radius);\n\t});\n\n/***/ },\n\n/***/ 238:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar root = __webpack_require__(240);\n\t\n\t/** Built-in value references. */\n\tvar Symbol = root.Symbol;\n\t\n\tmodule.exports = Symbol;\n\n\n/***/ },\n\n/***/ 331:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(18);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _Controls = __webpack_require__(333);\n\t\n\tvar _Controls2 = _interopRequireDefault(_Controls);\n\t\n\tvar _Renderer = __webpack_require__(343);\n\t\n\tvar _Renderer2 = _interopRequireDefault(_Renderer);\n\t\n\tvar _MatterDebug = __webpack_require__(342);\n\t\n\tvar _MatterDebug2 = _interopRequireDefault(_MatterDebug);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar App = function (_React$Component) {\n\t  _inherits(App, _React$Component);\n\t\n\t  function App() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, App);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = App.__proto__ || Object.getPrototypeOf(App)).call.apply(_ref, [this].concat(args))), _this), _this.updateSize = function () {\n\t      var width = window.innerWidth;\n\t      var height = window.innerHeight;\n\t      var controlsWidth = Math.max(Math.round(width * 0.2), 200);\n\t      var gameWidth = width - controlsWidth;\n\t\n\t      _this.setState({ width: width, height: height, controlsWidth: controlsWidth, gameWidth: gameWidth });\n\t      _this.props.game.setSize(gameWidth, height);\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t\n\t  _createClass(App, [{\n\t    key: 'getChildContext',\n\t    value: function getChildContext() {\n\t      return { game: this.props.game };\n\t    }\n\t  }, {\n\t    key: 'componentWillMount',\n\t    value: function componentWillMount() {\n\t      this.updateSize();\n\t      window.addEventListener('resize', this.updateSize);\n\t    }\n\t  }, {\n\t    key: 'componentWillUnmount',\n\t    value: function componentWillUnmount() {\n\t      window.removeEventListener('resize', this.updateSize);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var _props = this.props;\n\t      var game = _props.game;\n\t      var debug = _props.debug;\n\t      var _state = this.state;\n\t      var controlsWidth = _state.controlsWidth;\n\t      var gameWidth = _state.gameWidth;\n\t      var height = _state.height;\n\t\n\t\n\t      return _react2.default.createElement(\n\t        'div',\n\t        { className: 'App' },\n\t        _react2.default.createElement(_Renderer2.default, { width: gameWidth, height: height }),\n\t        _react2.default.createElement(_Controls2.default, { width: controlsWidth }),\n\t        debug && _react2.default.createElement(_MatterDebug2.default, { engine: game.engine, width: gameWidth, height: height })\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return App;\n\t}(_react2.default.Component);\n\t\n\tApp.propTypes = {\n\t  game: _react2.default.PropTypes.object.isRequired,\n\t  debug: _react2.default.PropTypes.bool\n\t};\n\tApp.childContextTypes = {\n\t  game: _react2.default.PropTypes.object.isRequired\n\t};\n\texports.default = App;\n\n/***/ },\n\n/***/ 332:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = Button;\n\t\n\tvar _react = __webpack_require__(18);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\t\n\tfunction Button(_ref) {\n\t  var _ref$className = _ref.className;\n\t  var className = _ref$className === undefined ? '' : _ref$className;\n\t\n\t  var props = _objectWithoutProperties(_ref, ['className']);\n\t\n\t  return _react2.default.createElement('button', _extends({ className: 'Button ' + className }, props));\n\t}\n\t\n\tButton.propTypes = {\n\t  className: _react2.default.PropTypes.string\n\t};\n\n/***/ },\n\n/***/ 333:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _react = __webpack_require__(18);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactRedux = __webpack_require__(91);\n\t\n\tvar _game = __webpack_require__(204);\n\t\n\tvar _Button = __webpack_require__(332);\n\t\n\tvar _Button2 = _interopRequireDefault(_Button);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Controls(_ref) {\n\t  var width = _ref.width;\n\t  var onSourceAdd = _ref.onSourceAdd;\n\t\n\t  return _react2.default.createElement(\n\t    'div',\n\t    { className: 'Controls', style: { width: width + 'px' } },\n\t    _react2.default.createElement(\n\t      'h2',\n\t      null,\n\t      'Programarble???'\n\t    ),\n\t    _react2.default.createElement(\n\t      _Button2.default,\n\t      { onClick: onSourceAdd },\n\t      'Add Source'\n\t    )\n\t  );\n\t}\n\t\n\tControls.propTypes = {\n\t  width: _react2.default.PropTypes.number.isRequired,\n\t  onSourceAdd: _react2.default.PropTypes.func.isRequired\n\t};\n\t\n\tvar mapDispatchToProps = {\n\t  onSourceAdd: function onSourceAdd() {\n\t    return (0, _game.addMachine)('Source', Math.random() * 500, Math.random() * 500);\n\t  }\n\t};\n\t\n\texports.default = (0, _reactRedux.connect)(null, mapDispatchToProps)(Controls);\n\n/***/ },\n\n/***/ 334:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(18);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _pixi = __webpack_require__(129);\n\t\n\tvar _pixi2 = _interopRequireDefault(_pixi);\n\t\n\tvar _reactPixi = __webpack_require__(59);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar RawGraphics = (0, _reactPixi.CustomPIXIComponent)({\n\t  customDisplayObject: function customDisplayObject() {\n\t    var graphics = new _pixi2.default.Graphics();\n\t    graphics.cacheAsBitmap = true;\n\t    return graphics;\n\t  },\n\t  customApplyProps: function customApplyProps(graphics, oldProps, props) {\n\t    graphics.clear();\n\t    props.draw(graphics);\n\t  }\n\t});\n\t\n\tvar Graphics = function (_React$Component) {\n\t  _inherits(Graphics, _React$Component);\n\t\n\t  function Graphics() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, Graphics);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Graphics.__proto__ || Object.getPrototypeOf(Graphics)).call.apply(_ref, [this].concat(args))), _this), _this.state = { drawCount: 1 }, _this.draw = function (graphics) {\n\t      return _react2.default.Children.toArray(_this.props.children).forEach(function (child) {\n\t        return child.type.draw(graphics, child.props);\n\t      });\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t\n\t  _createClass(Graphics, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      return _react2.default.createElement(RawGraphics, { draw: this.draw });\n\t    }\n\t  }]);\n\t\n\t  return Graphics;\n\t}(_react2.default.Component);\n\t\n\tGraphics.propTypes = {\n\t  children: _react2.default.PropTypes.node.isRequired\n\t};\n\texports.default = Graphics;\n\n/***/ },\n\n/***/ 335:\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar wrapDraw = function wrapDraw(draw) {\n\t  return function (graphics, props) {\n\t    graphics.lineWidth = props.lineWidth || 0;\n\t    graphics.lineColor = props.lineColor || 0;\n\t    graphics.lineAlpha = props.lineAlpha != null ? props.lineAlpha : 1;\n\t\n\t    var hasFill = props.fill != null;\n\t    if (hasFill) graphics.beginFill(props.fill, props.alpha);\n\t\n\t    draw(graphics, props);\n\t\n\t    if (hasFill) graphics.endFill();\n\t  };\n\t};\n\t\n\texports.default = function (name, draw) {\n\t  var Component = function Component() {\n\t    throw new Error(\"Graphics.\" + draw + \" can only be used as the direct child of <Graphics />\");\n\t  };\n\t\n\t  Component.draw = wrapDraw(draw);\n\t  Component.displayName = name;\n\t\n\t  return Component;\n\t};\n\n/***/ },\n\n/***/ 336:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Source;\n\t\n\tvar _react = __webpack_require__(18);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactPixi = __webpack_require__(59);\n\t\n\tvar _graphics = __webpack_require__(206);\n\t\n\tvar g = _interopRequireWildcard(_graphics);\n\t\n\tvar _constants = __webpack_require__(74);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar bottom = _constants.MARBLE_RADIUS;\n\tvar top = -(_constants.MARBLE_RADIUS + _constants.WALL_SIZE);\n\tvar flareRadius = _constants.MARBLE_RADIUS + _constants.PAD + _constants.WALL_SIZE;\n\tvar flareTopRadius = _constants.MARBLE_RADIUS + _constants.PAD;\n\tvar flareTop = _constants.MARBLE_RADIUS - _constants.WALL_SIZE * 2;\n\t\n\tvar box = [flareRadius, bottom, -flareRadius, bottom, -flareTopRadius, flareTop, -flareTopRadius, top + _constants.WALL_SIZE, 0, top, flareTopRadius, top + _constants.WALL_SIZE, flareTopRadius, flareTop];\n\t\n\tvar arrow = [0, _constants.MARBLE_RADIUS / 2, _constants.WALL_SIZE, -(_constants.MARBLE_RADIUS / 2), -_constants.WALL_SIZE, -(_constants.MARBLE_RADIUS / 2)];\n\t\n\tfunction Source(_ref) {\n\t  var x = _ref.x;\n\t  var y = _ref.y;\n\t\n\t  return _react2.default.createElement(\n\t    _reactPixi.DisplayObjectContainer,\n\t    { x: x, y: y },\n\t    _react2.default.createElement(\n\t      g.Graphics,\n\t      null,\n\t      _react2.default.createElement(g.Polygon, { path: box, fill: _constants.palette.black, lineColor: _constants.palette.blue, lineWidth: 2 }),\n\t      _react2.default.createElement(g.Polygon, { path: arrow, fill: _constants.palette.green })\n\t    )\n\t  );\n\t}\n\t\n\tSource.propTypes = {\n\t  x: _react2.default.PropTypes.number.isRequired,\n\t  y: _react2.default.PropTypes.number.isRequired\n\t};\n\t\n\tSource.contextTypes = {\n\t  game: _react2.default.PropTypes.object.isRequired\n\t};\n\n/***/ },\n\n/***/ 337:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Source = __webpack_require__(336);\n\t\n\tObject.defineProperty(exports, 'Source', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_Source).default;\n\t  }\n\t});\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n\n/***/ 338:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _react = __webpack_require__(18);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactRedux = __webpack_require__(91);\n\t\n\tvar _reactPixi = __webpack_require__(59);\n\t\n\tvar _reactImmutableProptypes = __webpack_require__(170);\n\t\n\tvar _reactImmutableProptypes2 = _interopRequireDefault(_reactImmutableProptypes);\n\t\n\tvar _machines = __webpack_require__(337);\n\t\n\tvar machines = _interopRequireWildcard(_machines);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Machine(_ref) {\n\t  var machine = _ref.machine;\n\t\n\t  var type = machine.get('type');\n\t  var component = machines[type];\n\t  if (!component) return _react2.default.createElement(_reactPixi.Text, { text: 'Machine ' + type + ' not found' });\n\t  return _react2.default.createElement(component, machine.toObject());\n\t}\n\t\n\tMachine.propTypes = {\n\t  machine: _reactImmutableProptypes2.default.map.isRequired\n\t};\n\t\n\tvar mapStateToProps = function mapStateToProps(state, _ref2) {\n\t  var machineId = _ref2.machineId;\n\t  return {\n\t    machine: state.get('game').get('machinesById').get(machineId)\n\t  };\n\t};\n\t\n\texports.default = (0, _reactRedux.connect)(mapStateToProps)(Machine);\n\n/***/ },\n\n/***/ 339:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _react = __webpack_require__(18);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactRedux = __webpack_require__(91);\n\t\n\tvar _reactPixi = __webpack_require__(59);\n\t\n\tvar _reactImmutableProptypes = __webpack_require__(170);\n\t\n\tvar _reactImmutableProptypes2 = _interopRequireDefault(_reactImmutableProptypes);\n\t\n\tvar _Machine = __webpack_require__(338);\n\t\n\tvar _Machine2 = _interopRequireDefault(_Machine);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Machines(_ref) {\n\t  var machines = _ref.machines;\n\t\n\t  return _react2.default.createElement(\n\t    _reactPixi.DisplayObjectContainer,\n\t    null,\n\t    machines.map(function (machine) {\n\t      return _react2.default.createElement(_Machine2.default, { machineId: machine, key: machine });\n\t    })\n\t  );\n\t}\n\t\n\tMachines.propTypes = {\n\t  machines: _reactImmutableProptypes2.default.set.isRequired\n\t};\n\t\n\tvar mapStateToProps = function mapStateToProps(state) {\n\t  return {\n\t    machines: state.get('game').get('machinesInScene')\n\t  };\n\t};\n\t\n\texports.default = (0, _reactRedux.connect)(mapStateToProps)(Machines);\n\n/***/ },\n\n/***/ 340:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Marble;\n\t\n\tvar _react = __webpack_require__(18);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactPixi = __webpack_require__(59);\n\t\n\tvar _pixi = __webpack_require__(129);\n\t\n\tvar _graphics = __webpack_require__(206);\n\t\n\tvar _constants = __webpack_require__(74);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar textStyle = {\n\t  fill: _constants.palette.str.darkWhite,\n\t  fontFamily: '\\'Source Sans Pro\\'',\n\t  fontSize: '14px',\n\t  fontWeight: '200',\n\t  font: '14px \\'Source Sans Pro\\''\n\t};\n\t\n\tvar center = new _pixi.Point(0.5, 0.5);\n\t\n\tfunction Marble(_ref) {\n\t  var x = _ref.x;\n\t  var y = _ref.y;\n\t  var angle = _ref.angle;\n\t  var value = _ref.value;\n\t\n\t  return _react2.default.createElement(\n\t    _reactPixi.DisplayObjectContainer,\n\t    { rotation: angle, x: x, y: y },\n\t    _react2.default.createElement(\n\t      _graphics.Graphics,\n\t      null,\n\t      _react2.default.createElement(_graphics.Circle, { x: 0, y: 0, radius: _constants.MARBLE_RADIUS, lineColor: _constants.palette.darkWhite, lineWidth: 2 })\n\t    ),\n\t    _react2.default.createElement(_reactPixi.Text, { text: value, style: textStyle, anchor: center })\n\t  );\n\t}\n\t\n\tMarble.propTypes = {\n\t  angle: _react2.default.PropTypes.number.isRequired,\n\t  x: _react2.default.PropTypes.number.isRequired,\n\t  y: _react2.default.PropTypes.number.isRequired,\n\t  value: _react2.default.PropTypes.any.isRequired\n\t};\n\n/***/ },\n\n/***/ 341:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(18);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactPixi = __webpack_require__(59);\n\t\n\tvar _Marble = __webpack_require__(340);\n\t\n\tvar _Marble2 = _interopRequireDefault(_Marble);\n\t\n\tvar _Marble3 = __webpack_require__(75);\n\t\n\tvar _Marble4 = _interopRequireDefault(_Marble3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Marbles = function (_React$Component) {\n\t  _inherits(Marbles, _React$Component);\n\t\n\t  function Marbles() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, Marbles);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Marbles.__proto__ || Object.getPrototypeOf(Marbles)).call.apply(_ref, [this].concat(args))), _this), _this.loop = function () {\n\t      _this.frameRequestId = window.requestAnimationFrame(_this.loop);\n\t      _this.forceUpdate();\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t\n\t  _createClass(Marbles, [{\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      this.loop();\n\t    }\n\t  }, {\n\t    key: 'componentWillUnmount',\n\t    value: function componentWillUnmount() {\n\t      window.cancelAnimationFrame(this.frameRequestId);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var marbles = this.context.game.marbles;\n\t\n\t\n\t      return _react2.default.createElement(\n\t        _reactPixi.DisplayObjectContainer,\n\t        null,\n\t        marbles.map(function (marble) {\n\t          var id = marble.id;\n\t          var angle = marble.angle;\n\t          var _marble$position = marble.position;\n\t          var x = _marble$position.x;\n\t          var y = _marble$position.y;\n\t\n\t          var value = _Marble4.default.getValue(marble);\n\t          return _react2.default.createElement(_Marble2.default, { key: id, x: x, y: y, angle: angle, value: value });\n\t        })\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return Marbles;\n\t}(_react2.default.Component);\n\t\n\tMarbles.contextTypes = {\n\t  game: _react2.default.PropTypes.object.isRequired\n\t};\n\texports.default = Marbles;\n\n/***/ },\n\n/***/ 342:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(18);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _matterJs = __webpack_require__(35);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar MatterDebug = function (_React$Component) {\n\t  _inherits(MatterDebug, _React$Component);\n\t\n\t  function MatterDebug() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, MatterDebug);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = MatterDebug.__proto__ || Object.getPrototypeOf(MatterDebug)).call.apply(_ref, [this].concat(args))), _this), _this.attachRenderer = function (element) {\n\t      var _this$props = _this.props;\n\t      var width = _this$props.width;\n\t      var height = _this$props.height;\n\t      var engine = _this$props.engine;\n\t\n\t      _this.renderer = _matterJs.Render.create({\n\t        engine: engine,\n\t        element: element,\n\t        options: {\n\t          width: width,\n\t          height: height,\n\t          wireframeBackground: 'transparent'\n\t        }\n\t      });\n\t\n\t      _matterJs.Render.run(_this.renderer);\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t\n\t  _createClass(MatterDebug, [{\n\t    key: 'componentWillUnmount',\n\t    value: function componentWillUnmount() {\n\t      if (this.renderer) _matterJs.Render.stop(this.renderer);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      return _react2.default.createElement('div', { className: 'MatterDebug', ref: this.attachRenderer });\n\t    }\n\t  }]);\n\t\n\t  return MatterDebug;\n\t}(_react2.default.Component);\n\t\n\tMatterDebug.propTypes = {\n\t  width: _react2.default.PropTypes.number.isRequired,\n\t  height: _react2.default.PropTypes.number.isRequired,\n\t  engine: _react2.default.PropTypes.object.isRequired\n\t};\n\texports.default = MatterDebug;\n\n/***/ },\n\n/***/ 343:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Renderer;\n\t\n\tvar _react = __webpack_require__(18);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactPixi = __webpack_require__(59);\n\t\n\tvar _Machines = __webpack_require__(339);\n\t\n\tvar _Machines2 = _interopRequireDefault(_Machines);\n\t\n\tvar _Marbles = __webpack_require__(341);\n\t\n\tvar _Marbles2 = _interopRequireDefault(_Marbles);\n\t\n\tvar _constants = __webpack_require__(74);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Renderer(_ref) {\n\t  var width = _ref.width;\n\t  var height = _ref.height;\n\t\n\t  return _react2.default.createElement(\n\t    'div',\n\t    { className: 'Renderer' },\n\t    _react2.default.createElement(\n\t      _reactPixi.Stage,\n\t      { backgroundcolor: _constants.palette.black, width: width, height: height, antialias: true },\n\t      _react2.default.createElement(_Marbles2.default, null),\n\t      _react2.default.createElement(_Machines2.default, null)\n\t    )\n\t  );\n\t}\n\t\n\tRenderer.propTypes = {\n\t  width: _react2.default.PropTypes.number.isRequired,\n\t  height: _react2.default.PropTypes.number.isRequired\n\t};\n\n/***/ },\n\n/***/ 344:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _matterJs = __webpack_require__(35);\n\t\n\tvar _Component = __webpack_require__(39);\n\t\n\tvar _Component2 = _interopRequireDefault(_Component);\n\t\n\tvar _Output = __webpack_require__(100);\n\t\n\tvar _Output2 = _interopRequireDefault(_Output);\n\t\n\tvar _Input = __webpack_require__(99);\n\t\n\tvar _Input2 = _interopRequireDefault(_Input);\n\t\n\tvar _Marble = __webpack_require__(75);\n\t\n\tvar _Marble2 = _interopRequireDefault(_Marble);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Clone = _Component2.default.create('Clone', {\n\t  initialState: function initialState(_ref) {\n\t    var x = _ref.x;\n\t    var y = _ref.y;\n\t    var rate = _ref.rate;\n\t\n\t    return {\n\t      input: _Input2.default.create({\n\t        x: x,\n\t        y: y - _Input2.default.height / 2,\n\t        isStatic: true,\n\t        rate: rate\n\t      }),\n\t      rightOutput: _Output2.default.create({\n\t        x: x + _Output2.default.width / 2,\n\t        y: y + _Output2.default.height / 2,\n\t        isStatic: true,\n\t        rate: rate\n\t      }),\n\t      leftOutput: _Output2.default.create({\n\t        x: x - _Output2.default.width / 2,\n\t        y: y + _Output2.default.height / 2,\n\t        isStatic: true,\n\t        rate: rate\n\t      })\n\t    };\n\t  },\n\t  create: function create(_ref2, _ref3) {\n\t    var x = _ref2.x;\n\t    var y = _ref2.y;\n\t    var input = _ref3.input;\n\t    var rightOutput = _ref3.rightOutput;\n\t    var leftOutput = _ref3.leftOutput;\n\t\n\t    return _matterJs.Composite.create({\n\t      bodies: [input, rightOutput, leftOutput]\n\t    });\n\t  },\n\t  beforeUpdate: function beforeUpdate(body, state) {\n\t    var input = state.input;\n\t    var leftOutput = state.leftOutput;\n\t    var rightOutput = state.rightOutput;\n\t\n\t    if (_Input2.default.canConsume(input) && _Output2.default.canProduce(leftOutput) && _Output2.default.canProduce(rightOutput)) {\n\t      var value = _Marble2.default.getValue(_Input2.default.consume(input));\n\t      _Output2.default.produce(leftOutput, value);\n\t      _Output2.default.produce(rightOutput, value);\n\t    }\n\t  }\n\t});\n\t\n\texports.default = Clone;\n\n/***/ },\n\n/***/ 345:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _matterJs = __webpack_require__(35);\n\t\n\tvar _Component = __webpack_require__(39);\n\t\n\tvar _Component2 = _interopRequireDefault(_Component);\n\t\n\tvar _Output = __webpack_require__(100);\n\t\n\tvar _Output2 = _interopRequireDefault(_Output);\n\t\n\tvar _Input = __webpack_require__(99);\n\t\n\tvar _Input2 = _interopRequireDefault(_Input);\n\t\n\tvar _Marble = __webpack_require__(75);\n\t\n\tvar _Marble2 = _interopRequireDefault(_Marble);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Combine = _Component2.default.create('Combine', {\n\t  initialState: function initialState(_ref) {\n\t    var x = _ref.x;\n\t    var y = _ref.y;\n\t    var rate = _ref.rate;\n\t    var combine = _ref.combine;\n\t\n\t    return {\n\t      combine: combine,\n\t      rightInput: _Input2.default.create({\n\t        x: x + _Input2.default.width / 2,\n\t        y: y - _Input2.default.height / 2,\n\t        isStatic: true,\n\t        rate: rate\n\t      }),\n\t      leftInput: _Input2.default.create({\n\t        x: x - _Input2.default.width / 2,\n\t        y: y - _Input2.default.height / 2,\n\t        isStatic: true,\n\t        rate: rate\n\t      }),\n\t      output: _Output2.default.create({\n\t        x: x,\n\t        y: y + _Output2.default.height / 2,\n\t        isStatic: true,\n\t        rate: rate\n\t      })\n\t    };\n\t  },\n\t  create: function create(_ref2, _ref3) {\n\t    var x = _ref2.x;\n\t    var y = _ref2.y;\n\t    var leftInput = _ref3.leftInput;\n\t    var rightInput = _ref3.rightInput;\n\t    var output = _ref3.output;\n\t\n\t    return _matterJs.Composite.create({\n\t      bodies: [rightInput, leftInput, output]\n\t    });\n\t  },\n\t  beforeUpdate: function beforeUpdate(body, state) {\n\t    var rightInput = state.rightInput;\n\t    var leftInput = state.leftInput;\n\t    var output = state.output;\n\t    var combine = state.combine;\n\t\n\t    if (_Input2.default.canConsume(leftInput) && _Input2.default.canConsume(rightInput) && _Output2.default.canProduce(output)) {\n\t      var left = _Marble2.default.getValue(_Input2.default.consume(leftInput));\n\t      var right = _Marble2.default.getValue(_Input2.default.consume(rightInput));\n\t      _Output2.default.produce(output, combine(left, right));\n\t    }\n\t  }\n\t});\n\t\n\texports.default = Combine;\n\n/***/ },\n\n/***/ 346:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Component = __webpack_require__(39);\n\t\n\tvar _Component2 = _interopRequireDefault(_Component);\n\t\n\tvar _Input = __webpack_require__(99);\n\t\n\tvar _Input2 = _interopRequireDefault(_Input);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Destination = _Component2.default.create('Destination', {\n\t  initialState: function initialState(_ref) {\n\t    var x = _ref.x;\n\t    var y = _ref.y;\n\t    var rate = _ref.rate;\n\t\n\t    return {\n\t      input: _Input2.default.create({ x: x, y: y, rate: rate, isStatic: true })\n\t    };\n\t  },\n\t  create: function create(_, _ref2) {\n\t    var input = _ref2.input;\n\t\n\t    return input;\n\t  },\n\t  beforeUpdate: function beforeUpdate(body) {\n\t    if (_Input2.default.canConsume(body)) _Input2.default.consume(body);\n\t  }\n\t});\n\t\n\texports.default = Destination;\n\n/***/ },\n\n/***/ 347:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _matterJs = __webpack_require__(35);\n\t\n\tvar _Component = __webpack_require__(39);\n\t\n\tvar _Component2 = _interopRequireDefault(_Component);\n\t\n\tvar _Output = __webpack_require__(100);\n\t\n\tvar _Output2 = _interopRequireDefault(_Output);\n\t\n\tvar _Input = __webpack_require__(99);\n\t\n\tvar _Input2 = _interopRequireDefault(_Input);\n\t\n\tvar _Marble = __webpack_require__(75);\n\t\n\tvar _Marble2 = _interopRequireDefault(_Marble);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Filter = _Component2.default.create('Filter', {\n\t  initialState: function initialState(_ref) {\n\t    var x = _ref.x;\n\t    var y = _ref.y;\n\t    var condition = _ref.condition;\n\t    var rate = _ref.rate;\n\t\n\t    return {\n\t      condition: condition,\n\t      input: _Input2.default.create({\n\t        x: x,\n\t        y: y - _Input2.default.height / 2,\n\t        isStatic: true,\n\t        rate: rate\n\t      }),\n\t      rightOutput: _Output2.default.create({\n\t        x: x + _Output2.default.width / 2,\n\t        y: y + _Output2.default.height / 2,\n\t        isStatic: true,\n\t        rate: rate\n\t      }),\n\t      leftOutput: _Output2.default.create({\n\t        x: x - _Output2.default.width / 2,\n\t        y: y + _Output2.default.height / 2,\n\t        isStatic: true,\n\t        rate: rate\n\t      })\n\t    };\n\t  },\n\t  create: function create(_ref2, _ref3) {\n\t    var x = _ref2.x;\n\t    var y = _ref2.y;\n\t    var input = _ref3.input;\n\t    var rightOutput = _ref3.rightOutput;\n\t    var leftOutput = _ref3.leftOutput;\n\t\n\t    return _matterJs.Composite.create({\n\t      bodies: [input, rightOutput, leftOutput]\n\t    });\n\t  },\n\t  beforeUpdate: function beforeUpdate(body, state) {\n\t    var input = state.input;\n\t    var leftOutput = state.leftOutput;\n\t    var rightOutput = state.rightOutput;\n\t    var condition = state.condition;\n\t\n\t    if (_Input2.default.canConsume(input) && _Output2.default.canProduce(leftOutput) && _Output2.default.canProduce(rightOutput)) {\n\t      var value = _Marble2.default.getValue(_Input2.default.consume(input));\n\t      _Output2.default.produce(condition(value) ? rightOutput : leftOutput, value);\n\t    }\n\t  }\n\t});\n\t\n\texports.default = Filter;\n\n/***/ },\n\n/***/ 348:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Component = __webpack_require__(39);\n\t\n\tvar _Component2 = _interopRequireDefault(_Component);\n\t\n\tvar _Output = __webpack_require__(100);\n\t\n\tvar _Output2 = _interopRequireDefault(_Output);\n\t\n\tvar _Count = __webpack_require__(350);\n\t\n\tvar _Count2 = _interopRequireDefault(_Count);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Source = _Component2.default.create('Source', {\n\t  initialState: function initialState(_ref) {\n\t    var x = _ref.x;\n\t    var y = _ref.y;\n\t    var _ref$sequence = _ref.sequence;\n\t    var sequence = _ref$sequence === undefined ? new _Count2.default() : _ref$sequence;\n\t    var rate = _ref.rate;\n\t\n\t    return {\n\t      output: _Output2.default.create({ x: x, y: y, rate: rate, isStatic: true }),\n\t      sequence: sequence\n\t    };\n\t  },\n\t  create: function create(_, _ref2) {\n\t    var output = _ref2.output;\n\t\n\t    return output;\n\t  },\n\t  beforeUpdate: function beforeUpdate(body, _ref3) {\n\t    var sequence = _ref3.sequence;\n\t\n\t    if (_Output2.default.canProduce(body)) _Output2.default.produce(body, sequence.next());\n\t  }\n\t});\n\t\n\texports.default = Source;\n\n/***/ },\n\n/***/ 349:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Clone = __webpack_require__(344);\n\t\n\tObject.defineProperty(exports, 'Clone', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_Clone).default;\n\t  }\n\t});\n\t\n\tvar _Combine = __webpack_require__(345);\n\t\n\tObject.defineProperty(exports, 'Combine', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_Combine).default;\n\t  }\n\t});\n\t\n\tvar _Destination = __webpack_require__(346);\n\t\n\tObject.defineProperty(exports, 'Destination', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_Destination).default;\n\t  }\n\t});\n\t\n\tvar _Filter = __webpack_require__(347);\n\t\n\tObject.defineProperty(exports, 'Filter', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_Filter).default;\n\t  }\n\t});\n\t\n\tvar _Source = __webpack_require__(348);\n\t\n\tObject.defineProperty(exports, 'Source', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_Source).default;\n\t  }\n\t});\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n\n/***/ 350:\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Count = function () {\n\t  function Count() {\n\t    var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t    var _ref$min = _ref.min;\n\t    var min = _ref$min === undefined ? 0 : _ref$min;\n\t    var _ref$max = _ref.max;\n\t    var max = _ref$max === undefined ? Infinity : _ref$max;\n\t    var _ref$step = _ref.step;\n\t    var step = _ref$step === undefined ? 1 : _ref$step;\n\t\n\t    _classCallCheck(this, Count);\n\t\n\t    this.nextValue = min;\n\t    this.max = max;\n\t    this.step = step;\n\t  }\n\t\n\t  _createClass(Count, [{\n\t    key: \"next\",\n\t    value: function next() {\n\t      var value = this.nextValue;\n\t      this.nextValue += this.step;\n\t      return value;\n\t    }\n\t  }]);\n\t\n\t  return Count;\n\t}();\n\t\n\texports.default = Count;\n\n/***/ },\n\n/***/ 351:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _matterJs = __webpack_require__(35);\n\t\n\tvar _flatten = __webpack_require__(582);\n\t\n\tvar _flatten2 = _interopRequireDefault(_flatten);\n\t\n\tvar _Component = __webpack_require__(39);\n\t\n\tvar _Component2 = _interopRequireDefault(_Component);\n\t\n\tvar _utils = __webpack_require__(131);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar hasProp = function hasProp(key, type) {\n\t  return function (obj) {\n\t    return _typeof(obj[key]) === type;\n\t  };\n\t}; // eslint-disable-line valid-typeof\n\t\n\t/* eslint-disable no-console */\n\tvar logEventSetup = function logEventSetup(event, components) {\n\t  console.group('Setup events: ' + event);\n\t  if (components.length === 0) console.log('none');\n\t  components.forEach(function (component) {\n\t    return Array.isArray(component) ? console.log(component[0].toString(), '💥', component[1].toString()) : console.log(component.componentId.toString());\n\t  });\n\t  console.groupEnd();\n\t};\n\t/* eslint-enable no-console */\n\t\n\tvar eventNames = { start: 'collisionStart', end: 'collisionEnd' };\n\t\n\texports.default = function (state, registered) {\n\t  var components = Object.values(registered);\n\t\n\t  var setupWorldEvent = function setupWorldEvent(eventName) {\n\t    var relevantComponents = components.filter(hasProp(eventName, 'function'));\n\t\n\t    var fireForBody = function fireForBody(body) {\n\t      relevantComponents.forEach(function (component) {\n\t        return (0, _utils.hasOwnProperty)(body, component.componentId) && component[eventName](body, component.getState(body), state);\n\t      });\n\t\n\t      if (body.type === 'composite') {\n\t        _matterJs.Composite.allBodies(body).forEach(fireForBody);\n\t      }\n\t    };\n\t\n\t    logEventSetup(eventName, relevantComponents);\n\t    _matterJs.Events.on(state.world, eventName, function (event) {\n\t      return Array.isArray(event.object) ? event.object.forEach(fireForBody) : fireForBody(event.object);\n\t    });\n\t  };\n\t\n\t  var setupEngineEvent = function setupEngineEvent(eventName) {\n\t    var relevantComponents = components.filter(hasProp(eventName, 'function'));\n\t    logEventSetup(eventName, relevantComponents);\n\t    _matterJs.Events.on(state.engine, eventName, function () {\n\t      return relevantComponents.forEach(function (component) {\n\t        return component.instances.forEach(function (body) {\n\t          return component[eventName](body, component.getState(body), state);\n\t        });\n\t      });\n\t    });\n\t  };\n\t\n\t  var fireCollision = function fireCollision(phase, typeA, bodyA, typeB, bodyB) {\n\t    var componentA = _Component2.default.registered[typeA];\n\t    var componentB = _Component2.default.registered[typeB];\n\t    var componentState = componentA.getState(bodyA);\n\t\n\t    componentA.collisions[componentB.name][phase](bodyA, componentState, bodyB, state);\n\t  };\n\t\n\t  var setupCollisionEvents = function setupCollisionEvents(phase) {\n\t    var eventName = eventNames[phase];\n\t\n\t    var pairs = (0, _flatten2.default)(components.filter(hasProp('collisions', 'object')).map(function (component) {\n\t      return Object.keys(component.collisions).filter(function (key) {\n\t        return hasProp(phase, 'function')(component.collisions[key]);\n\t      }).map(function (key) {\n\t        return [component.componentId, _Component2.default.get(key).componentId];\n\t      });\n\t    }));\n\t\n\t    logEventSetup(eventName, pairs);\n\t\n\t    _matterJs.Events.on(state.engine, eventName, function (event) {\n\t      return event.pairs.forEach(function (pair) {\n\t        return pairs.forEach(function (_ref) {\n\t          var _ref2 = _slicedToArray(_ref, 2);\n\t\n\t          var typeA = _ref2[0];\n\t          var typeB = _ref2[1];\n\t\n\t          if ((0, _utils.hasOwnProperty)(pair.bodyA, typeA) && (0, _utils.hasOwnProperty)(pair.bodyB, typeB)) {\n\t            fireCollision(phase, typeA, pair.bodyA, typeB, pair.bodyB, pair);\n\t          } else if ((0, _utils.hasOwnProperty)(pair.bodyB, typeA) && (0, _utils.hasOwnProperty)(pair.bodyA, typeB)) {\n\t            fireCollision(phase, typeA, pair.bodyB, typeB, pair.bodyA, pair);\n\t          }\n\t        });\n\t      });\n\t    });\n\t  };\n\t\n\t  setupWorldEvent('beforeAdd');\n\t  setupWorldEvent('afterAdd');\n\t  setupWorldEvent('beforeRemove');\n\t  setupWorldEvent('afterRemove');\n\t  setupCollisionEvents('start');\n\t  setupCollisionEvents('end');\n\t  setupEngineEvent('beforeUpdate');\n\t  setupEngineEvent('afterUpdate');\n\t};\n\n/***/ },\n\n/***/ 352:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _matterJs = __webpack_require__(35);\n\t\n\tvar _Component = __webpack_require__(39);\n\t\n\tvar _Component2 = _interopRequireDefault(_Component);\n\t\n\tvar _Marble = __webpack_require__(75);\n\t\n\tvar _Marble2 = _interopRequireDefault(_Marble);\n\t\n\tvar _setupEvents = __webpack_require__(351);\n\t\n\tvar _setupEvents2 = _interopRequireDefault(_setupEvents);\n\t\n\tvar _syncStore = __webpack_require__(353);\n\t\n\tvar _syncStore2 = _interopRequireDefault(_syncStore);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = function (store) {\n\t  var engine = _matterJs.Engine.create();\n\t  var world = engine.world;\n\t\n\t  var game = {\n\t    engine: engine,\n\t    world: world,\n\t    marbles: _Marble2.default.instances,\n\t    bounds: {\n\t      min: { x: 0, y: 0 },\n\t      max: { x: Infinity, y: Infinity }\n\t    },\n\t\n\t    setSize: function setSize(width, height) {\n\t      game.bounds.max.x = width;\n\t      game.bounds.max.y = height;\n\t    }\n\t  };\n\t\n\t  (0, _setupEvents2.default)(game, _Component2.default.registered);\n\t  (0, _syncStore2.default)(game, store);\n\t  _matterJs.Engine.run(engine);\n\t\n\t  window.game = game;\n\t  return game;\n\t};\n\n/***/ },\n\n/***/ 353:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _matterJs = __webpack_require__(35);\n\t\n\tvar _immutable = __webpack_require__(87);\n\t\n\tvar _immutable2 = _interopRequireDefault(_immutable);\n\t\n\tvar _machines = __webpack_require__(349);\n\t\n\tvar machines = _interopRequireWildcard(_machines);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = function (_ref, store) {\n\t  var engine = _ref.engine;\n\t  var world = _ref.world;\n\t\n\t  var instancesById = {};\n\t\n\t  var lastMachinesInScene = _immutable2.default.Set();\n\t\n\t  _matterJs.Events.on(engine, 'beforeUpdate', function () {\n\t    var state = store.getState().get('game');\n\t    var machinesById = state.get('machinesById');\n\t    var machinesInScene = state.get('machinesInScene');\n\t\n\t    if (!machinesInScene.equals(lastMachinesInScene)) {\n\t      var added = machinesInScene.subtract(lastMachinesInScene).map(function (machineId) {\n\t        var machine = machinesById.get(machineId).toObject();\n\t        var machineClass = machines[machine.type];\n\t        if (!machineClass) throw new Error('Unknown machine type ' + machine.type);\n\t\n\t        var instance = machineClass.create(machine);\n\t        instancesById[machineId] = instance;\n\t\n\t        return instance;\n\t      }).toArray();\n\t\n\t      if (added.length) _matterJs.World.add(world, added);\n\t\n\t      var removed = lastMachinesInScene.subtract(machinesInScene).map(function (machineId) {\n\t        var instance = instancesById[machineId];\n\t        if (!instance) throw new Error('Unknown instance ' + machineId);\n\t        instancesById[machineId] = undefined;\n\t        return machineId;\n\t      }).toArray();\n\t\n\t      if (removed.length) _matterJs.World.remove(world, removed);\n\t    }\n\t\n\t    lastMachinesInScene = machinesInScene;\n\t  });\n\t};\n\n/***/ },\n\n/***/ 354:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _react = __webpack_require__(18);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(255);\n\t\n\tvar _reactRedux = __webpack_require__(91);\n\t\n\tvar _App = __webpack_require__(331);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tvar _store = __webpack_require__(356);\n\t\n\tvar _store2 = _interopRequireDefault(_store);\n\t\n\tvar _game = __webpack_require__(204);\n\t\n\tvar _start = __webpack_require__(352);\n\t\n\tvar _start2 = _interopRequireDefault(_start);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar game = (0, _start2.default)(_store2.default);\n\t\n\t(0, _reactDom.render)(_react2.default.createElement(\n\t  _reactRedux.Provider,\n\t  { store: _store2.default },\n\t  _react2.default.createElement(_App2.default, { game: game })\n\t), document.getElementById('content'));\n\t\n\t_store2.default.dispatch((0, _game.addMachine)('Source', 100, 100));\n\n/***/ },\n\n/***/ 355:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _immutable = __webpack_require__(87);\n\t\n\tvar _immutable2 = _interopRequireDefault(_immutable);\n\t\n\tvar _types = __webpack_require__(205);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tvar initialState = _immutable2.default.Map({\n\t  machinesById: _immutable2.default.Map(),\n\t  machinesInScene: _immutable2.default.Set()\n\t});\n\t\n\tvar reducers = _defineProperty({}, _types.MACHINES.ADD, function (state, _ref) {\n\t  var machineType = _ref.machineType;\n\t  var id = _ref.id;\n\t  var x = _ref.x;\n\t  var y = _ref.y;\n\t  return state.setIn(['machinesById', id], _immutable2.default.Map({ type: machineType, id: id, x: x, y: y })).update('machinesInScene', function (machinesInScene) {\n\t    return machinesInScene.add(id);\n\t  });\n\t});\n\t\n\texports.default = function () {\n\t  var state = arguments.length <= 0 || arguments[0] === undefined ? initialState : arguments[0];\n\t  var action = arguments[1];\n\t\n\t  if (!reducers[action.type]) return state;\n\t  return reducers[action.type](state, action);\n\t};\n\n/***/ },\n\n/***/ 356:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _redux = __webpack_require__(193);\n\t\n\tvar _immutable = __webpack_require__(87);\n\t\n\tvar _immutable2 = _interopRequireDefault(_immutable);\n\t\n\tvar _reduxThunk = __webpack_require__(287);\n\t\n\tvar _reduxThunk2 = _interopRequireDefault(_reduxThunk);\n\t\n\tvar _game = __webpack_require__(355);\n\t\n\tvar _game2 = _interopRequireDefault(_game);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar initialState = _immutable2.default.Map();\n\t\n\tvar reducer = function reducer() {\n\t  var state = arguments.length <= 0 || arguments[0] === undefined ? initialState : arguments[0];\n\t  var action = arguments[1];\n\t  return state.update('game', function (gameState) {\n\t    return (0, _game2.default)(gameState, action);\n\t  });\n\t};\n\t\n\tvar store = (0, _redux.createStore)(reducer, initialState, (0, _redux.compose)((0, _redux.applyMiddleware)(_reduxThunk2.default), window.devToolsExtension ? window.devToolsExtension() : function (f) {\n\t  return f;\n\t}));\n\t\n\texports.default = store;\n\n/***/ },\n\n/***/ 552:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"style.css\";\n\n/***/ },\n\n/***/ 558:\n/***/ function(module, exports) {\n\n\t/**\n\t * Appends the elements of `values` to `array`.\n\t *\n\t * @private\n\t * @param {Array} array The array to modify.\n\t * @param {Array} values The values to append.\n\t * @returns {Array} Returns `array`.\n\t */\n\tfunction arrayPush(array, values) {\n\t  var index = -1,\n\t      length = values.length,\n\t      offset = array.length;\n\t\n\t  while (++index < length) {\n\t    array[offset + index] = values[index];\n\t  }\n\t  return array;\n\t}\n\t\n\tmodule.exports = arrayPush;\n\n\n/***/ },\n\n/***/ 559:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar arrayPush = __webpack_require__(558),\n\t    isFlattenable = __webpack_require__(571);\n\t\n\t/**\n\t * The base implementation of `_.flatten` with support for restricting flattening.\n\t *\n\t * @private\n\t * @param {Array} array The array to flatten.\n\t * @param {number} depth The maximum recursion depth.\n\t * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n\t * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n\t * @param {Array} [result=[]] The initial result value.\n\t * @returns {Array} Returns the new flattened array.\n\t */\n\tfunction baseFlatten(array, depth, predicate, isStrict, result) {\n\t  var index = -1,\n\t      length = array.length;\n\t\n\t  predicate || (predicate = isFlattenable);\n\t  result || (result = []);\n\t\n\t  while (++index < length) {\n\t    var value = array[index];\n\t    if (depth > 0 && predicate(value)) {\n\t      if (depth > 1) {\n\t        // Recursively flatten arrays (susceptible to call stack limits).\n\t        baseFlatten(value, depth - 1, predicate, isStrict, result);\n\t      } else {\n\t        arrayPush(result, value);\n\t      }\n\t    } else if (!isStrict) {\n\t      result[result.length] = value;\n\t    }\n\t  }\n\t  return result;\n\t}\n\t\n\tmodule.exports = baseFlatten;\n\n\n/***/ },\n\n/***/ 565:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar Symbol = __webpack_require__(238),\n\t    isSymbol = __webpack_require__(244);\n\t\n\t/** Used as references for various `Number` constants. */\n\tvar INFINITY = 1 / 0;\n\t\n\t/** Used to convert symbols to primitives and strings. */\n\tvar symbolProto = Symbol ? Symbol.prototype : undefined,\n\t    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\t\n\t/**\n\t * The base implementation of `_.toString` which doesn't convert nullish\n\t * values to empty strings.\n\t *\n\t * @private\n\t * @param {*} value The value to process.\n\t * @returns {string} Returns the string.\n\t */\n\tfunction baseToString(value) {\n\t  // Exit early for strings to avoid a performance hit in some environments.\n\t  if (typeof value == 'string') {\n\t    return value;\n\t  }\n\t  if (isSymbol(value)) {\n\t    return symbolToString ? symbolToString.call(value) : '';\n\t  }\n\t  var result = (value + '');\n\t  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n\t}\n\t\n\tmodule.exports = baseToString;\n\n\n/***/ },\n\n/***/ 571:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar Symbol = __webpack_require__(238),\n\t    isArguments = __webpack_require__(242),\n\t    isArray = __webpack_require__(159);\n\t\n\t/** Built-in value references. */\n\tvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\t\n\t/**\n\t * Checks if `value` is a flattenable `arguments` object or array.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n\t */\n\tfunction isFlattenable(value) {\n\t  return isArray(value) || isArguments(value) ||\n\t    !!(spreadableSymbol && value && value[spreadableSymbol]);\n\t}\n\t\n\tmodule.exports = isFlattenable;\n\n\n/***/ },\n\n/***/ 582:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar baseFlatten = __webpack_require__(559);\n\t\n\t/**\n\t * Flattens `array` a single level deep.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Array\n\t * @param {Array} array The array to flatten.\n\t * @returns {Array} Returns the new flattened array.\n\t * @example\n\t *\n\t * _.flatten([1, [2, [3, [4]], 5]]);\n\t * // => [1, 2, [3, [4]], 5]\n\t */\n\tfunction flatten(array) {\n\t  var length = array ? array.length : 0;\n\t  return length ? baseFlatten(array, 1) : [];\n\t}\n\t\n\tmodule.exports = flatten;\n\n\n/***/ },\n\n/***/ 589:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar baseToString = __webpack_require__(565);\n\t\n\t/**\n\t * Converts `value` to a string. An empty string is returned for `null`\n\t * and `undefined` values. The sign of `-0` is preserved.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to process.\n\t * @returns {string} Returns the string.\n\t * @example\n\t *\n\t * _.toString(null);\n\t * // => ''\n\t *\n\t * _.toString(-0);\n\t * // => '-0'\n\t *\n\t * _.toString([1, 2, 3]);\n\t * // => '1,2,3'\n\t */\n\tfunction toString(value) {\n\t  return value == null ? '' : baseToString(value);\n\t}\n\t\n\tmodule.exports = toString;\n\n\n/***/ },\n\n/***/ 590:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar toString = __webpack_require__(589);\n\t\n\t/** Used to generate unique IDs. */\n\tvar idCounter = 0;\n\t\n\t/**\n\t * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n\t *\n\t * @static\n\t * @since 0.1.0\n\t * @memberOf _\n\t * @category Util\n\t * @param {string} [prefix=''] The value to prefix the ID with.\n\t * @returns {string} Returns the unique ID.\n\t * @example\n\t *\n\t * _.uniqueId('contact_');\n\t * // => 'contact_104'\n\t *\n\t * _.uniqueId();\n\t * // => '105'\n\t */\n\tfunction uniqueId(prefix) {\n\t  var id = ++idCounter;\n\t  return toString(prefix) + id;\n\t}\n\t\n\tmodule.exports = uniqueId;\n\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** app.js\n **/","import { remove } from '../lib/utils';\n\nconst noop = val => () => val;\nconst Component = {\n  registered: {},\n\n  create(name, spec) {\n    const id = Symbol(`Component(${name})`);\n\n    const component = Object.assign({}, spec, {\n      name,\n      componentId: id,\n      instances: [],\n      initialState: spec.initialState || (() => ({})),\n      _afterAdd: spec.afterAdd || noop(),\n      _beforeRemove: spec.beforeRemove || noop(),\n\n      create(props) {\n        const state = component.initialState(props);\n        const instance = spec.create(props, state);\n        instance.id = spec.id || instance.id;\n        instance[id] = state;\n        return instance;\n      },\n\n      getState(instance) {\n        return instance[id];\n      },\n\n      afterAdd(instance) {\n        component.instances.push(instance);\n        component._afterAdd.apply(this, arguments);\n      },\n\n      beforeRemove(instance) {\n        remove(component.instances, instance);\n        component._beforeRemove.apply(this, arguments);\n      },\n    });\n\n    Component.registered[id] = Component.registered[name] = component;\n    return component;\n  },\n\n  get(name) {\n    if (!Component.registered[name]) throw new Error(`Component ${name.toString()} not found`);\n    return Component.registered[name];\n  },\n};\n\nexport default Component;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/Component.js\n **/","export const GEOM_SCALE = 1;\nexport const MARBLE_RADIUS = 15 * GEOM_SCALE;\nexport const WALL_SIZE = 5 * GEOM_SCALE;\nexport const PAD = 1 * GEOM_SCALE;\n\nexport const palette = {\n  turquoise: 0x1abc9c,\n  green: 0x2ecc71,\n  blue: 0x3498db,\n  purple: 0x9b59b6,\n  black: 0x34495e,\n  yellow: 0xf1c40f,\n  orange: 0xe67e22,\n  red: 0xe74c3c,\n  white: 0xecf0f1,\n  grey: 0x95a5a6,\n  darkTurquoise: 0x16a085,\n  darkGreen: 0x27ae60,\n  darkBlue: 0x2980b9,\n  darkPurple: 0x8e44ad,\n  darkBlack: 0x2c3e50,\n  darkYellow: 0xf39c12,\n  darkOrange: 0xd35400,\n  darkRed: 0xc0392b,\n  darkWhite: 0xbdc3c7,\n  darkGrey: 0x7f8c8d,\n};\n\npalette.str = Object\n  .entries(palette)\n  .reduce((colours, [name, colour]) => ({\n    ...colours,\n    [name]: `#${colour.toString(16)}`,\n  }), {});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/constants.js\n **/","import { Bodies, Bounds, Common, World } from 'matter-js';\nimport { MARBLE_RADIUS } from '../constants';\nimport Component from './Component';\n\nconst Marble = Component.create('Marble', {\n  initialState({ value }) {\n    return {\n      value,\n    };\n  },\n\n  create({ x, y }) {\n    return Bodies.circle(x, y, MARBLE_RADIUS, {\n      force: {\n        x: Common.random(-0.001, 0.001),\n        y: Common.random(-0.001, 0.001),\n      },\n      friction: 0.1,\n    });\n  },\n\n  getValue(body) {\n    return Marble.getState(body).value;\n  },\n\n  setValue(body, value) {\n    Marble.getState(body).value = value;\n    return value;\n  },\n\n  afterUpdate(body, state, { bounds, world }) {\n    if (!Bounds.overlaps(bounds, body.bounds)) {\n      World.remove(world, body);\n    }\n  },\n});\n\nexport default Marble;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/Marble.js\n **/","import { Bodies, Body, World } from 'matter-js';\nimport Component from '../../Component';\nimport { MARBLE_RADIUS, WALL_SIZE, PAD } from '../../../constants';\nimport { remove } from '../../../lib/utils';\n\nconst InputSensor = Component.create('Input.Sensor', {\n  width: 2 * (MARBLE_RADIUS + PAD),\n  height: WALL_SIZE,\n\n  create({ x, y }) {\n    return Bodies.rectangle(x, y + MARBLE_RADIUS, InputSensor.width, InputSensor.height, {\n      isSensor: true,\n    });\n  },\n\n  collisions: {\n    Marble: {\n      start(body, state, marble) {\n        Input.getState(body.parent).waiting.push(marble);\n      },\n\n      end(body, state, marble) {\n        remove(Input.getState(body.parent).waiting, marble);\n      },\n    },\n  },\n});\n\nconst Input = Component.create('Input', {\n  width: 2 * (MARBLE_RADIUS + WALL_SIZE + PAD),\n  height: 2 * (WALL_SIZE + MARBLE_RADIUS),\n  initialState({ rate = 100 }) {\n    return {\n      rate,\n      waiting: [],\n    };\n  },\n\n  create({ x, y, isStatic }) {\n    return Body.create({\n      isStatic,\n      parts: [\n        Bodies.rectangle(\n          x + MARBLE_RADIUS + (WALL_SIZE / 2) + PAD,\n          y,\n          WALL_SIZE,\n          Input.height - WALL_SIZE,\n        ),\n        Bodies.rectangle(\n          x - (MARBLE_RADIUS + (WALL_SIZE / 2) + PAD),\n          y,\n          WALL_SIZE,\n          Input.height - WALL_SIZE,\n          { render: { fillStyle: 'red' } },\n        ),\n        Bodies.rectangle(\n          x,\n          y + MARBLE_RADIUS + WALL_SIZE,\n          Input.width,\n          WALL_SIZE,\n        ),\n        InputSensor.create({ x, y }),\n      ],\n    });\n  },\n\n  afterAdd(body, state, game) {\n    state.game = game;\n    state.lastConsumed = game.engine.timing.timestamp;\n  },\n\n  canConsume(body) {\n    const { lastConsumed, rate, waiting, game } = Input.getState(body);\n    const { timing: { timestamp } } = game.engine;\n\n    return timestamp - lastConsumed > rate && waiting.length;\n  },\n\n  consume(body) {\n    const state = Input.getState(body);\n    const { game: { world, engine } } = state;\n    const consumed = state.waiting.shift();\n\n    World.remove(world, consumed);\n    state.lastConsumed = engine.timing.timestamp;\n\n    return consumed;\n  },\n});\n\nexport default Input;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/machines/parts/Input.js\n **/","import { Bodies, Body, World } from 'matter-js';\nimport Component from '../../Component';\nimport Marble from '../../Marble';\nimport { MARBLE_RADIUS, WALL_SIZE, PAD } from '../../../constants';\n\nconst OutputSensor = Component.create('Output.Sensor', {\n  width: 2 * (MARBLE_RADIUS + PAD),\n  height: 2 * MARBLE_RADIUS,\n\n  create({ x, y }) {\n    return Bodies.rectangle(x, y, OutputSensor.width, OutputSensor.height, {\n      isSensor: true,\n    });\n  },\n\n  collisions: {\n    Marble: {\n      start(body) {\n        Output.getState(body.parent).blockers += 1;\n      },\n\n      end(body) {\n        Output.getState(body.parent).blockers -= 1;\n      },\n    },\n  },\n});\n\nconst Output = Component.create('Output', {\n  width: 2 * (MARBLE_RADIUS + WALL_SIZE + PAD),\n  height: WALL_SIZE + (MARBLE_RADIUS * 2),\n\n  initialState({ rate = 100 }) {\n    return {\n      rate,\n      blockers: 0,\n    };\n  },\n\n  create({ x, y, isStatic }) {\n    return Body.create({\n      isStatic,\n      parts: [\n        Bodies.rectangle(\n          x + MARBLE_RADIUS + (WALL_SIZE / 2) + PAD,\n          y,\n          WALL_SIZE,\n          MARBLE_RADIUS * 2,\n        ),\n        Bodies.rectangle(\n          x - (MARBLE_RADIUS + (WALL_SIZE / 2) + PAD),\n          y,\n          WALL_SIZE,\n          MARBLE_RADIUS * 2,\n        ),\n        Bodies.rectangle(\n          x,\n          y - (MARBLE_RADIUS + (WALL_SIZE / 2)),\n          Output.width,\n          WALL_SIZE,\n        ),\n        OutputSensor.create({ x, y }),\n      ],\n    });\n  },\n\n  afterAdd(body, state, game) {\n    state.game = game;\n    state.lastProduced = game.engine.timing.timestamp;\n  },\n\n  canProduce(body) {\n    const { lastProduced, rate, blockers, game } = Output.getState(body);\n    const { timing: { timestamp } } = game.engine;\n\n    return timestamp - lastProduced > rate && !blockers;\n  },\n\n  produce(body, value) {\n    const state = Output.getState(body);\n    const { game: { world, engine } } = state;\n\n    World.add(world, Marble.create({\n      x: body.position.x,\n      y: body.position.y,\n      value,\n    }));\n\n    state.lastProduced = engine.timing.timestamp;\n  },\n});\n\nexport default Output;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/machines/parts/Output.js\n **/","export const hasOwnProperty = (obj, key) =>\n  Object.prototype.hasOwnProperty.call(obj, key);\n\nexport const remove = (arr, value) => {\n  const idx = arr.indexOf(value);\n  if (idx === -1) return undefined;\n  return arr.splice(idx, 1)[0];\n};\n\nexport const degrees = n =>\n  n * (Math.PI / 180);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/utils.js\n **/","import uniqueId from 'lodash/uniqueId';\nimport * as types from './types';\n\n/* eslint-disable import/prefer-default-export */\n\nexport const addMachine = (machineType, x, y) => ({\n  type: types.MACHINES.ADD,\n  machineType,\n  id: uniqueId(machineType),\n  x,\n  y,\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/actions/game.js\n **/","/* eslint-disable import/prefer-default-export */\nexport const MACHINES = {\n  ADD: 'MACHINES:ADD',\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/actions/types.js\n **/","import createGraphicsComponent from './lib/createGraphicsComponent';\n\nexport { default as Graphics } from './Graphics';\n\nexport const Arc = createGraphicsComponent('Arc',\n  (graphics, { cx, cy, radius, startAngle, endAngle, antiClockwise, x1, y1, x2, y2 }) => {\n    if (cx != null && cy != null && radius != null && startAngle != null && endAngle != null) {\n      graphics.arc(cx, cy, radius, startAngle, endAngle, antiClockwise);\n    } else if (x1 != null && x2 != null && y1 != null && y2 != null && radius != null) {\n      graphics.arcTo(x1, y1, x2, y2, radius);\n    } else {\n      throw new Error('Arc must be given props matching either Pixi Graphics arc or arcTo');\n    }\n  });\n\nexport const BezierCurve = createGraphicsComponent('BezierCurve',\n  (graphics, { cpX, cpY, cpX2, cpY2, toX, toY }) =>\n    graphics.BezierCurveTo(cpX, cpY, cpX2, cpY2, toX, toY));\n\nexport const Circle = createGraphicsComponent('Circle',\n  (graphics, { x, y, radius }) =>\n    graphics.drawCircle(x, y, radius));\n\nexport const Ellipse = createGraphicsComponent('Ellipse',\n  (graphics, { x, y, width, height }) =>\n    graphics.drawEllipse(x, y, width, height));\n\nexport const Polygon = createGraphicsComponent('Polygon',\n  (graphics, { path }) =>\n    graphics.drawPolygon(path));\n\nexport const Rectangle = createGraphicsComponent('Rectangle',\n  (graphics, { x, y, width, height }) =>\n    graphics.drawRectangle(x, y, width, height));\n\nexport const RoundedRectangle = createGraphicsComponent('RoundedRectangle',\n  (graphics, { x, y, width, height, radius }) =>\n    graphics.drawRoundedRect(x, y, width, height, radius));\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/graphics/index.js\n **/","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_Symbol.js\n ** module id = 238\n ** module chunks = 1\n **/","import React from 'react';\nimport Controls from './controls/Controls';\nimport Renderer from './render/Renderer';\nimport MatterDebug from './render/MatterDebug';\n\nexport default class App extends React.Component {\n  static propTypes = {\n    game: React.PropTypes.object.isRequired,\n    debug: React.PropTypes.bool,\n  };\n\n  static childContextTypes = {\n    game: React.PropTypes.object.isRequired,\n  };\n\n  getChildContext() {\n    return { game: this.props.game };\n  }\n\n  componentWillMount() {\n    this.updateSize();\n    window.addEventListener('resize', this.updateSize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.updateSize);\n  }\n\n  updateSize = () => {\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n    const controlsWidth = Math.max(Math.round(width * 0.2), 200);\n    const gameWidth = width - controlsWidth;\n\n    this.setState({ width, height, controlsWidth, gameWidth });\n    this.props.game.setSize(gameWidth, height);\n  };\n\n  render() {\n    const { game, debug } = this.props;\n    const { controlsWidth, gameWidth, height } = this.state;\n\n    return (\n      <div className=\"App\">\n        <Renderer width={gameWidth} height={height} />\n        <Controls width={controlsWidth} />\n        {debug &&\n          <MatterDebug engine={game.engine} width={gameWidth} height={height} />}\n      </div>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/App.js\n **/","import React from 'react';\n\nexport default function Button({ className = '', ...props }) {\n  return <button className={`Button ${className}`} {...props} />;\n}\n\nButton.propTypes = {\n  className: React.PropTypes.string,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Button.js\n **/","import React from 'react';\nimport { connect } from 'react-redux';\nimport { addMachine } from '../../actions/game';\nimport Button from '../Button';\n\nfunction Controls({ width, onSourceAdd }) {\n  return (\n    <div className=\"Controls\" style={{ width: `${width}px` }}>\n      <h2>Programarble???</h2>\n      <Button onClick={onSourceAdd}>Add Source</Button>\n    </div>\n  );\n}\n\nControls.propTypes = {\n  width: React.PropTypes.number.isRequired,\n  onSourceAdd: React.PropTypes.func.isRequired,\n};\n\nconst mapDispatchToProps = {\n  onSourceAdd: () => addMachine('Source', Math.random() * 500, Math.random() * 500),\n};\n\nexport default connect(null, mapDispatchToProps)(Controls);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/controls/Controls.js\n **/","import React from 'react';\nimport Pixi from 'pixi.js';\nimport { CustomPIXIComponent } from 'react-pixi';\n\nconst RawGraphics = CustomPIXIComponent({\n  customDisplayObject() {\n    const graphics = new Pixi.Graphics();\n    graphics.cacheAsBitmap = true;\n    return graphics;\n  },\n\n  customApplyProps(graphics, oldProps, props) {\n    graphics.clear();\n    props.draw(graphics);\n  },\n});\n\nexport default class Graphics extends React.Component {\n  static propTypes = {\n    children: React.PropTypes.node.isRequired,\n  };\n\n  state = { drawCount: 1 };\n\n  draw = graphics =>\n    React.Children\n      .toArray(this.props.children)\n      .forEach(child =>\n        child.type.draw(graphics, child.props));\n\n  render() {\n    return <RawGraphics draw={this.draw} />;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/graphics/Graphics.js\n **/","const wrapDraw = draw => (graphics, props) => {\n  graphics.lineWidth = props.lineWidth || 0;\n  graphics.lineColor = props.lineColor || 0;\n  graphics.lineAlpha = props.lineAlpha != null ? props.lineAlpha : 1;\n\n  const hasFill = props.fill != null;\n  if (hasFill) graphics.beginFill(props.fill, props.alpha);\n\n  draw(graphics, props);\n\n  if (hasFill) graphics.endFill();\n};\n\nexport default (name, draw) => {\n  const Component = () => {\n    throw new Error(`Graphics.${draw} can only be used as the direct child of <Graphics />`);\n  };\n\n  Component.draw = wrapDraw(draw);\n  Component.displayName = name;\n\n  return Component;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/graphics/lib/createGraphicsComponent.js\n **/","import React from 'react';\nimport { DisplayObjectContainer } from 'react-pixi';\nimport * as g from '../graphics';\nimport { palette, PAD, WALL_SIZE, MARBLE_RADIUS } from '../../constants';\n\nconst bottom = MARBLE_RADIUS;\nconst top = -(MARBLE_RADIUS + WALL_SIZE);\nconst flareRadius = MARBLE_RADIUS + PAD + WALL_SIZE;\nconst flareTopRadius = MARBLE_RADIUS + PAD;\nconst flareTop = MARBLE_RADIUS - (WALL_SIZE * 2);\n\nconst box = [\n  flareRadius, bottom,\n  -flareRadius, bottom,\n  -flareTopRadius, flareTop,\n  -flareTopRadius, top + WALL_SIZE,\n  0, top,\n  flareTopRadius, top + WALL_SIZE,\n  flareTopRadius, flareTop,\n];\n\nconst arrow = [\n  0, MARBLE_RADIUS / 2,\n  WALL_SIZE, -(MARBLE_RADIUS / 2),\n  -WALL_SIZE, -(MARBLE_RADIUS / 2),\n];\n\nexport default function Source({ x, y }) {\n  return (\n    <DisplayObjectContainer x={x} y={y}>\n      <g.Graphics>\n        <g.Polygon path={box} fill={palette.black} lineColor={palette.blue} lineWidth={2} />\n        <g.Polygon path={arrow} fill={palette.green} />\n      </g.Graphics>\n    </DisplayObjectContainer>\n  );\n}\n\nSource.propTypes = {\n  x: React.PropTypes.number.isRequired,\n  y: React.PropTypes.number.isRequired,\n};\n\nSource.contextTypes = {\n  game: React.PropTypes.object.isRequired,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/machines/Source.js\n **/","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Text } from 'react-pixi';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport * as machines from '../machines';\n\nfunction Machine({ machine }) {\n  const type = machine.get('type');\n  const component = machines[type];\n  if (!component) return <Text text={`Machine ${type} not found`} />;\n  return React.createElement(component, machine.toObject());\n}\n\nMachine.propTypes = {\n  machine: ImmutablePropTypes.map.isRequired,\n};\n\nconst mapStateToProps = (state, { machineId }) => ({\n  machine: state.get('game').get('machinesById').get(machineId),\n});\n\nexport default connect(mapStateToProps)(Machine);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/render/Machine.js\n **/","import React from 'react';\nimport { connect } from 'react-redux';\nimport { DisplayObjectContainer } from 'react-pixi';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport Machine from './Machine';\n\nfunction Machines({ machines }) {\n  return (\n    <DisplayObjectContainer>\n      {machines.map(machine => <Machine machineId={machine} key={machine} />)}\n    </DisplayObjectContainer>\n  );\n}\n\nMachines.propTypes = {\n  machines: ImmutablePropTypes.set.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  machines: state.get('game').get('machinesInScene'),\n});\n\nexport default connect(mapStateToProps)(Machines);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/render/Machines.js\n **/","import React from 'react';\nimport { DisplayObjectContainer, Text } from 'react-pixi';\nimport { Point } from 'pixi.js';\nimport { Graphics, Circle } from '../graphics';\nimport { palette, MARBLE_RADIUS } from '../../constants';\n\nconst textStyle = {\n  fill: palette.str.darkWhite,\n  fontFamily: '\\'Source Sans Pro\\'',\n  fontSize: '14px',\n  fontWeight: '200',\n  font: '14px \\'Source Sans Pro\\'',\n};\n\nconst center = new Point(0.5, 0.5);\n\nexport default function Marble({ x, y, angle, value }) {\n  return (\n    <DisplayObjectContainer rotation={angle} x={x} y={y}>\n      <Graphics>\n        <Circle x={0} y={0} radius={MARBLE_RADIUS} lineColor={palette.darkWhite} lineWidth={2} />\n      </Graphics>\n      <Text text={value} style={textStyle} anchor={center} />\n    </DisplayObjectContainer>\n  );\n}\n\nMarble.propTypes = {\n  angle: React.PropTypes.number.isRequired,\n  x: React.PropTypes.number.isRequired,\n  y: React.PropTypes.number.isRequired,\n  value: React.PropTypes.any.isRequired,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/render/Marble.js\n **/","import React from 'react';\nimport { DisplayObjectContainer } from 'react-pixi';\nimport Marble from './Marble';\nimport EngineMarble from '../../engine/Marble';\n\nexport default class Marbles extends React.Component {\n  static contextTypes = {\n    game: React.PropTypes.object.isRequired,\n  };\n\n  componentDidMount() {\n    this.loop();\n  }\n\n  componentWillUnmount() {\n    window.cancelAnimationFrame(this.frameRequestId);\n  }\n\n  loop = () => {\n    this.frameRequestId = window.requestAnimationFrame(this.loop);\n    this.forceUpdate();\n  };\n\n  render() {\n    const { marbles } = this.context.game;\n\n    return (\n      <DisplayObjectContainer>\n        {marbles.map((marble) => {\n          const { id, angle, position: { x, y } } = marble;\n          const value = EngineMarble.getValue(marble);\n          return <Marble key={id} x={x} y={y} angle={angle} value={value} />;\n        })}\n      </DisplayObjectContainer>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/render/Marbles.js\n **/","import React from 'react';\nimport { Render } from 'matter-js';\n\nexport default class MatterDebug extends React.Component {\n  static propTypes = {\n    width: React.PropTypes.number.isRequired,\n    height: React.PropTypes.number.isRequired,\n    engine: React.PropTypes.object.isRequired,\n  };\n\n  componentWillUnmount() {\n    if (this.renderer) Render.stop(this.renderer);\n  }\n\n  attachRenderer = (element) => {\n    const { width, height, engine } = this.props;\n    this.renderer = Render.create({\n      engine,\n      element,\n      options: {\n        width,\n        height,\n        wireframeBackground: 'transparent',\n      },\n    });\n\n    Render.run(this.renderer);\n  }\n\n  render() {\n    return <div className=\"MatterDebug\" ref={this.attachRenderer} />;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/render/MatterDebug.js\n **/","import React from 'react';\nimport { Stage } from 'react-pixi';\nimport Machines from './Machines';\nimport Marbles from './Marbles';\nimport { palette } from '../../constants';\n\nexport default function Renderer({ width, height }) {\n  return (\n    <div className=\"Renderer\">\n      <Stage backgroundcolor={palette.black} width={width} height={height} antialias>\n        <Marbles />\n        <Machines />\n      </Stage>\n    </div>\n  );\n}\n\nRenderer.propTypes = {\n  width: React.PropTypes.number.isRequired,\n  height: React.PropTypes.number.isRequired,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/render/Renderer.js\n **/","import { Composite } from 'matter-js';\nimport Component from '../Component';\nimport Output from './parts/Output';\nimport Input from './parts/Input';\nimport Marble from '../Marble';\n\nconst Clone = Component.create('Clone', {\n  initialState({ x, y, rate }) {\n    return {\n      input: Input.create({\n        x,\n        y: y - (Input.height / 2),\n        isStatic: true,\n        rate,\n      }),\n      rightOutput: Output.create({\n        x: x + (Output.width / 2),\n        y: y + (Output.height / 2),\n        isStatic: true,\n        rate,\n      }),\n      leftOutput: Output.create({\n        x: x - (Output.width / 2),\n        y: y + (Output.height / 2),\n        isStatic: true,\n        rate,\n      }),\n    };\n  },\n\n  create({ x, y }, { input, rightOutput, leftOutput }) {\n    return Composite.create({\n      bodies: [\n        input,\n        rightOutput,\n        leftOutput,\n      ],\n    });\n  },\n\n  beforeUpdate(body, state) {\n    const { input, leftOutput, rightOutput } = state;\n    if (Input.canConsume(input) && Output.canProduce(leftOutput) &&\n        Output.canProduce(rightOutput)) {\n      const value = Marble.getValue(Input.consume(input));\n      Output.produce(leftOutput, value);\n      Output.produce(rightOutput, value);\n    }\n  },\n});\n\nexport default Clone;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/machines/Clone.js\n **/","import { Composite } from 'matter-js';\nimport Component from '../Component';\nimport Output from './parts/Output';\nimport Input from './parts/Input';\nimport Marble from '../Marble';\n\nconst Combine = Component.create('Combine', {\n  initialState({ x, y, rate, combine }) {\n    return {\n      combine,\n      rightInput: Input.create({\n        x: x + (Input.width / 2),\n        y: y - (Input.height / 2),\n        isStatic: true,\n        rate,\n      }),\n      leftInput: Input.create({\n        x: x - (Input.width / 2),\n        y: y - (Input.height / 2),\n        isStatic: true,\n        rate,\n      }),\n      output: Output.create({\n        x,\n        y: y + (Output.height / 2),\n        isStatic: true,\n        rate,\n      }),\n    };\n  },\n\n  create({ x, y }, { leftInput, rightInput, output }) {\n    return Composite.create({\n      bodies: [\n        rightInput,\n        leftInput,\n        output,\n      ],\n    });\n  },\n\n  beforeUpdate(body, state) {\n    const { rightInput, leftInput, output, combine } = state;\n    if (Input.canConsume(leftInput) && Input.canConsume(rightInput) && Output.canProduce(output)) {\n      const left = Marble.getValue(Input.consume(leftInput));\n      const right = Marble.getValue(Input.consume(rightInput));\n      Output.produce(output, combine(left, right));\n    }\n  },\n});\n\nexport default Combine;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/machines/Combine.js\n **/","import Component from '../Component';\nimport Input from './parts/Input';\n\nconst Destination = Component.create('Destination', {\n  initialState({ x, y, rate }) {\n    return {\n      input: Input.create({ x, y, rate, isStatic: true }),\n    };\n  },\n\n  create(_, { input }) {\n    return input;\n  },\n\n  beforeUpdate(body) {\n    if (Input.canConsume(body)) Input.consume(body);\n  },\n});\n\nexport default Destination;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/machines/Destination.js\n **/","import { Composite } from 'matter-js';\nimport Component from '../Component';\nimport Output from './parts/Output';\nimport Input from './parts/Input';\nimport Marble from '../Marble';\n\nconst Filter = Component.create('Filter', {\n  initialState({ x, y, condition, rate }) {\n    return {\n      condition,\n      input: Input.create({\n        x,\n        y: y - (Input.height / 2),\n        isStatic: true,\n        rate,\n      }),\n      rightOutput: Output.create({\n        x: x + (Output.width / 2),\n        y: y + (Output.height / 2),\n        isStatic: true,\n        rate,\n      }),\n      leftOutput: Output.create({\n        x: x - (Output.width / 2),\n        y: y + (Output.height / 2),\n        isStatic: true,\n        rate,\n      }),\n    };\n  },\n\n  create({ x, y }, { input, rightOutput, leftOutput }) {\n    return Composite.create({\n      bodies: [\n        input,\n        rightOutput,\n        leftOutput,\n      ],\n    });\n  },\n\n  beforeUpdate(body, state) {\n    const { input, leftOutput, rightOutput, condition } = state;\n    if (Input.canConsume(input) && Output.canProduce(leftOutput) &&\n        Output.canProduce(rightOutput)) {\n      const value = Marble.getValue(Input.consume(input));\n      Output.produce(condition(value) ? rightOutput : leftOutput, value);\n    }\n  },\n});\n\nexport default Filter;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/machines/Filter.js\n **/","import Component from '../Component';\nimport Output from './parts/Output';\nimport Count from '../sequences/Count';\n\nconst Source = Component.create('Source', {\n  initialState({ x, y, sequence = new Count(), rate }) {\n    return {\n      output: Output.create({ x, y, rate, isStatic: true }),\n      sequence,\n    };\n  },\n\n  create(_, { output }) {\n    return output;\n  },\n\n  beforeUpdate(body, { sequence }) {\n    if (Output.canProduce(body)) Output.produce(body, sequence.next());\n  },\n});\n\nexport default Source;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/machines/Source.js\n **/","export default class Count {\n  constructor({ min = 0, max = Infinity, step = 1 } = {}) {\n    this.nextValue = min;\n    this.max = max;\n    this.step = step;\n  }\n\n  next() {\n    const value = this.nextValue;\n    this.nextValue += this.step;\n    return value;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/sequences/Count.js\n **/","import { Events, Composite } from 'matter-js';\nimport flatten from 'lodash/flatten';\nimport Component from './Component';\nimport { hasOwnProperty } from '../lib/utils';\n\nconst hasProp = (key, type) => obj =>\n  typeof obj[key] === type; // eslint-disable-line valid-typeof\n\n/* eslint-disable no-console */\nconst logEventSetup = (event, components) => {\n  console.group(`Setup events: ${event}`);\n  if (components.length === 0) console.log('none');\n  components.forEach(component =>\n    (Array.isArray(component)\n      ? console.log(component[0].toString(), '💥', component[1].toString())\n      : console.log(component.componentId.toString())));\n  console.groupEnd();\n};\n/* eslint-enable no-console */\n\nconst eventNames = { start: 'collisionStart', end: 'collisionEnd' };\n\nexport default (state, registered) => {\n  const components = Object.values(registered);\n\n  const setupWorldEvent = (eventName) => {\n    const relevantComponents = components.filter(hasProp(eventName, 'function'));\n\n    const fireForBody = (body) => {\n      relevantComponents.forEach(component =>\n        hasOwnProperty(body, component.componentId) &&\n          component[eventName](body, component.getState(body), state));\n\n      if (body.type === 'composite') {\n        Composite.allBodies(body).forEach(fireForBody);\n      }\n    };\n\n    logEventSetup(eventName, relevantComponents);\n    Events.on(state.world, eventName, event =>\n      (Array.isArray(event.object)\n        ? event.object.forEach(fireForBody)\n        : fireForBody(event.object)));\n  };\n\n  const setupEngineEvent = (eventName) => {\n    const relevantComponents = components.filter(hasProp(eventName, 'function'));\n    logEventSetup(eventName, relevantComponents);\n    Events.on(state.engine, eventName, () =>\n      relevantComponents.forEach(component =>\n        component.instances.forEach(body =>\n          component[eventName](body, component.getState(body), state))));\n  };\n\n  const fireCollision = (phase, typeA, bodyA, typeB, bodyB) => {\n    const componentA = Component.registered[typeA];\n    const componentB = Component.registered[typeB];\n    const componentState = componentA.getState(bodyA);\n\n    componentA.collisions[componentB.name][phase](bodyA, componentState, bodyB, state);\n  };\n\n  const setupCollisionEvents = (phase) => {\n    const eventName = eventNames[phase];\n\n    const pairs = flatten(components\n      .filter(hasProp('collisions', 'object'))\n      .map(component =>\n        Object\n          .keys(component.collisions)\n          .filter(key => hasProp(phase, 'function')(component.collisions[key]))\n          .map(key => [component.componentId, Component.get(key).componentId])));\n\n    logEventSetup(eventName, pairs);\n\n    Events.on(state.engine, eventName, event =>\n      event.pairs.forEach(pair =>\n        pairs.forEach(([typeA, typeB]) => {\n          if (hasOwnProperty(pair.bodyA, typeA) && hasOwnProperty(pair.bodyB, typeB)) {\n            fireCollision(phase, typeA, pair.bodyA, typeB, pair.bodyB, pair);\n          } else if (hasOwnProperty(pair.bodyB, typeA) && hasOwnProperty(pair.bodyA, typeB)) {\n            fireCollision(phase, typeA, pair.bodyB, typeB, pair.bodyA, pair);\n          }\n        })));\n  };\n\n  setupWorldEvent('beforeAdd');\n  setupWorldEvent('afterAdd');\n  setupWorldEvent('beforeRemove');\n  setupWorldEvent('afterRemove');\n  setupCollisionEvents('start');\n  setupCollisionEvents('end');\n  setupEngineEvent('beforeUpdate');\n  setupEngineEvent('afterUpdate');\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/setupEvents.js\n **/","import { Engine } from 'matter-js';\nimport Component from './Component';\nimport Marble from './Marble';\n\nimport setupEvents from './setupEvents';\nimport syncStore from './syncStore';\n\nexport default (store) => {\n  const engine = Engine.create();\n  const world = engine.world;\n\n  const game = {\n    engine,\n    world,\n    marbles: Marble.instances,\n    bounds: {\n      min: { x: 0, y: 0 },\n      max: { x: Infinity, y: Infinity },\n    },\n\n    setSize(width, height) {\n      game.bounds.max.x = width;\n      game.bounds.max.y = height;\n    },\n  };\n\n  setupEvents(game, Component.registered);\n  syncStore(game, store);\n  Engine.run(engine);\n\n  window.game = game;\n  return game;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/start.js\n **/","import { Events, World } from 'matter-js';\nimport Immutable from 'immutable';\nimport * as machines from './machines';\n\nexport default ({ engine, world }, store) => {\n  const instancesById = {};\n\n  let lastMachinesInScene = Immutable.Set();\n\n  Events.on(engine, 'beforeUpdate', () => {\n    const state = store.getState().get('game');\n    const machinesById = state.get('machinesById');\n    const machinesInScene = state.get('machinesInScene');\n\n    if (!machinesInScene.equals(lastMachinesInScene)) {\n      const added = machinesInScene\n        .subtract(lastMachinesInScene)\n        .map((machineId) => {\n          const machine = machinesById.get(machineId).toObject();\n          const machineClass = machines[machine.type];\n          if (!machineClass) throw new Error(`Unknown machine type ${machine.type}`);\n\n          const instance = machineClass.create(machine);\n          instancesById[machineId] = instance;\n\n          return instance;\n        })\n        .toArray();\n\n      if (added.length) World.add(world, added);\n\n      const removed = lastMachinesInScene\n        .subtract(machinesInScene)\n        .map((machineId) => {\n          const instance = instancesById[machineId];\n          if (!instance) throw new Error(`Unknown instance ${machineId}`);\n          instancesById[machineId] = undefined;\n          return machineId;\n        })\n        .toArray();\n\n      if (removed.length) World.remove(world, removed);\n    }\n\n    lastMachinesInScene = machinesInScene;\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/syncStore.js\n **/","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport App from './components/App';\n\nimport store from './store';\nimport { addMachine } from './actions/game';\nimport startEngine from './engine/start';\n\nconst game = startEngine(store);\n\nrender(\n  <Provider store={store}>\n    <App game={game} />\n  </Provider>,\n  document.getElementById('content'));\n\nstore.dispatch(addMachine('Source', 100, 100));\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import Immutable from 'immutable';\nimport { MACHINES as types } from '../actions/types';\n\nconst initialState = Immutable.Map({\n  machinesById: Immutable.Map(),\n  machinesInScene: Immutable.Set(),\n});\n\nconst reducers = {\n  [types.ADD]: (state, { machineType, id, x, y }) =>\n    state\n      .setIn(['machinesById', id], Immutable.Map({ type: machineType, id, x, y }))\n      .update('machinesInScene', machinesInScene => machinesInScene.add(id)),\n};\n\nexport default (state = initialState, action) => {\n  if (!reducers[action.type]) return state;\n  return reducers[action.type](state, action);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/game.js\n **/","import { createStore, applyMiddleware, compose } from 'redux';\nimport Immutable from 'immutable';\nimport reduxThunk from 'redux-thunk';\nimport gameReducer from './reducers/game';\n\nconst initialState = Immutable.Map();\n\nconst reducer = (state = initialState, action) =>\n  state\n    .update('game', gameState => gameReducer(gameState, action));\n\nconst store = createStore(\n  reducer,\n  initialState,\n  compose(\n    applyMiddleware(reduxThunk),\n    (window.devToolsExtension ? window.devToolsExtension() : f => f)),\n);\n\nexport default store;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store.js\n **/","module.exports = __webpack_public_path__ + \"style.css\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./styles/index.scss\n ** module id = 552\n ** module chunks = 1\n **/","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_arrayPush.js\n ** module id = 558\n ** module chunks = 1\n **/","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_baseFlatten.js\n ** module id = 559\n ** module chunks = 1\n **/","var Symbol = require('./_Symbol'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_baseToString.js\n ** module id = 565\n ** module chunks = 1\n **/","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_isFlattenable.js\n ** module id = 571\n ** module chunks = 1\n **/","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array ? array.length : 0;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/flatten.js\n ** module id = 582\n ** module chunks = 1\n **/","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/toString.js\n ** module id = 589\n ** module chunks = 1\n **/","var toString = require('./toString');\n\n/** Used to generate unique IDs. */\nvar idCounter = 0;\n\n/**\n * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {string} [prefix=''] The value to prefix the ID with.\n * @returns {string} Returns the unique ID.\n * @example\n *\n * _.uniqueId('contact_');\n * // => 'contact_104'\n *\n * _.uniqueId();\n * // => '105'\n */\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return toString(prefix) + id;\n}\n\nmodule.exports = uniqueId;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/uniqueId.js\n ** module id = 590\n ** module chunks = 1\n **/"],"sourceRoot":""}